# IFO ([module info](GFF-File-Format#ifo-module-info))

Part of the [GFF File Format Documentation](GFF-File-Format).

IFO files define module-level metadata including entry configuration, expansion requirements, area lists, and module-wide script hooks. [IFO](GFF-File-Format#ifo-module-info) files [ARE](GFF-File-Format#are-area) the "main" descriptor for game modules, specifying where the player spawns and what scripts run at module scope.

**Official Bioware Documentation:** For the authoritative Bioware Aurora Engine [IFO](GFF-File-Format#ifo-module-info) format specification, see [Bioware Aurora IFO Format](Bioware-Aurora-IFO).

**Reference**: [`Libraries/PyKotor/src/pykotor/resource/generics/ifo.py`](https://github.com/th3w1zard1/PyKotor/blob/master/Libraries/PyKotor/src/pykotor/resource/generics/ifo.py)

## Core Module Identity

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_ID` | Void (16 bytes) | Unique module identifier (GUID) |
| `Mod_Tag` | [CExoString](GFF-File-Format#gff-data-types) | Module tag identifier |
| `Mod_Name` | [CExoLocString](GFF-File-Format#gff-data-types) | Module name (localized) |
| `Mod_Creator_ID` | DWord | Toolset creator ID |
| `Mod_Version` | DWord | Module version number |
| `Mod_VO_ID` | [CExoString](GFF-File-Format#gff-data-types) | Voice-over folder name |

**Module Identification:**

- **Mod_ID**: 16-[byte](GFF-File-Format#gff-data-types) GUID generated by toolset
- **Mod_Tag**: Script-accessible identifier
- **Mod_Name**: Displayed in load screens
- **Mod_VO_ID**: Subfolder in StreamVoice for voice files

## Entry Configuration

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_Entry_Area` | [ResRef](GFF-File-Format#gff-data-types) | Starting [area](GFF-File-Format#are-area) [ResRef](GFF-File-Format#gff-data-types) |
| `Mod_Entry_X` | Float | Entry X coordinate |
| `Mod_Entry_Y` | Float | Entry Y coordinate |
| `Mod_Entry_Z` | Float | Entry Z coordinate |
| `Mod_Entry_Dir_X` | Float | Entry direction X (facing) |
| `Mod_Entry_Dir_Y` | Float | Entry direction Y (facing) |

**Player Spawn:**

- **Mod_Entry_Area**: Initial area to load ([ARE](GFF-File-Format#are-area)/[GIT](GFF-File-Format#git-game-instance-template))
- **Entry position**: XYZ coordinates in world space
- **Entry Direction**: Player's initial facing angle
  - Direction computed as: `atan2(Dir_Y, Dir_X)`

**Module Start Sequence:**

1. Load [IFO](GFF-File-Format#ifo-module-info) to get entry configuration
2. Load Mod_Entry_Area ([ARE](GFF-File-Format#are-area) + [GIT](GFF-File-Format#git-game-instance-template))
3. Spawn player character at Entry position
4. Set player orientation from Entry direction
5. Execute Mod_OnModStart script

## Area List

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_Area_list` | List | Areas in this module |

**Mod_Area_list Struct fields:**

- `Area_Name` ([ResRef](GFF-File-Format#gff-data-types)): [Area](GFF-File-Format#are-area) [ResRef](GFF-File-Format#gff-data-types) ([ARE](GFF-File-Format#are-area) file)

**Area Management:**

- Lists all areas accessible in module
- Areas loaded on-demand as player transitions
- KotOR modules typically have 1 area per module
- KotOR2 can have multiple areas per module

## Expansion Pack Requirements

| field | type | Description |
| ----- | ---- | ----------- |
| `Expansion_Pack` | Word | Required expansion bitfield |
| `Mod_MinGameVer` | [CExoString](GFF-File-Format#gff-data-types) | Minimum game version |

**Expansion Flags (Bitfield):**

- **0x01**: Requires expansion pack 1
- **0x02**: Requires expansion pack 2
- Additional bits for future expansions

**Version Requirements:**

- **Mod_MinGameVer**: Minimum executable version
- Prevents loading in older game versions
- format: "1.0", "1.03", "2.0", etc.

## Starting Movie & HAK files

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_StartMovie` | [ResRef](GFF-File-Format#gff-data-types) | Starting movie file |
| `Mod_Hak` | [CExoString](GFF-File-Format#gff-data-types) | Required HAK file list |

**Module Initialization:**

- **Mod_StartMovie**: BIK movie played before module loads
- **Mod_Hak**: Semicolon-separated HAK file names
- HAKs loaded before module resources

**HAK System:**

- HAK files override base game resources
- Custom content ([models](MDL-MDX-File-Format), [textures](TPC-File-Format), scripts)
- Listed in load priority order

## Cache & XP Settings

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_IsSaveGame` | Byte | Module is from save file |
| `Mod_CacheNSSData` | Byte | Cache compiled scripts |
| `Mod_XPScale` | Byte | Experience point multiplier (0-200%) |

**Module [flags](GFF-File-Format#gff-data-types):**

- **Mod_IsSaveGame**: Internal flag (always 0 in files)
- **Mod_CacheNSSData**: Performance optimization
- **Mod_XPScale**: 100 = normal, 200 = [double](GFF-File-Format#gff-data-types) XP

## DawnStar Property (Unused)

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_DawnHour` | Byte | Dawn start hour (unused) |
| `Mod_DuskHour` | Byte | Dusk start hour (unused) |
| `Mod_MinPerHour` | DWord | Minutes per hour (unused) |

**Day/Night Cycle:**

- Defined but unused in KotOR
- Intended for time-based events
- No dynamic lighting/NPC schedules

## Module Script Hooks

| field | type | Description |
| ----- | ---- | ----------- |
| `Mod_OnAcquirItem` | [ResRef](GFF-File-Format#gff-data-types) | Fires when item acquired |
| `Mod_OnActvtItem` | [ResRef](GFF-File-Format#gff-data-types) | Fires when item activated/used |
| `Mod_OnClientEntr` | [ResRef](GFF-File-Format#gff-data-types) | Fires on player enter (multiplayer) |
| `Mod_OnClientLeav` | [ResRef](GFF-File-Format#gff-data-types) | Fires on player leave (multiplayer) |
| `Mod_OnCutsnAbort` | [ResRef](GFF-File-Format#gff-data-types) | Fires when cutscene aborted |
| `Mod_OnHeartbeat` | [ResRef](GFF-File-Format#gff-data-types) | Fires periodically (~6 seconds) |
| `Mod_OnModLoad` | [ResRef](GFF-File-Format#gff-data-types) | Fires when module finishes loading |
| `Mod_OnModStart` | [ResRef](GFF-File-Format#gff-data-types) | Fires after player spawned |
| `Mod_OnPlrDeath` | [ResRef](GFF-File-Format#gff-data-types) | Fires when player dies |
| `Mod_OnPlrDying` | [ResRef](GFF-File-Format#gff-data-types) | Fires when player HP reaches 0 |
| `Mod_OnPlrEqItm` | [ResRef](GFF-File-Format#gff-data-types) | Fires when equipment changed |
| `Mod_OnPlrLvlUp` | [ResRef](GFF-File-Format#gff-data-types) | Fires on level up |
| `Mod_OnPlrRest` | [ResRef](GFF-File-Format#gff-data-types) | Fires when player rests |
| `Mod_OnPlrUnEqItm` | [ResRef](GFF-File-Format#gff-data-types) | Fires when equipment removed |
| `Mod_OnSpawnBtnDn` | [ResRef](GFF-File-Format#gff-data-types) | Fires on spawn button (multiplayer) |
| `Mod_OnUnAqreItem` | [ResRef](GFF-File-Format#gff-data-types) | Fires when item lost/sold |
| `Mod_OnUsrDefined` | [ResRef](GFF-File-Format#gff-data-types) | Fires on user-defined events |

**Script Execution:**

- Module scripts run in module context
- Can access/modify module-wide state
- Higher scope than area scripts

**Common Script Uses:**

**Mod_OnModLoad:**

- Initialize global variables
- Setup persistent data structures
- Load saved state

**Mod_OnModStart:**

- Start cinematics
- Give starting equipment
- Setup initial conversations

**Mod_OnHeartbeat:**

- Update timers
- Check global conditions
- Ambient system updates

**Mod_OnPlrDeath:**

- Game over sequence
- Respawn handling
- Load last save

## Implementation Notes

**Module Loading Sequence:**

1. **Read [IFO](GFF-File-Format#ifo-module-info)**: Parse module metadata
2. **Check Requirements**: Verify Expansion_Pack and MinGameVer
3. **Load HAKs**: Mount HAK files in order
4. **Play Movie**: Show Mod_StartMovie if set
5. **Load Entry Area**: Read [ARE](GFF-File-Format#are-area) + [GIT](GFF-File-Format#git-game-instance-template) for Mod_Entry_Area
6. **Spawn Player**: Place at Entry position/direction
7. **Fire OnModLoad**: Execute module load script
8. **Fire OnModStart**: Execute module start script
9. **Start Gameplay**: Enable player control

**[IFO](GFF-File-Format#ifo-module-info) vs. [ARE](GFF-File-Format#are-area) vs. GIT:**

- **[IFO](GFF-File-Format#ifo-module-info)**: Module-level metadata and entry config
- **[ARE](GFF-File-Format#are-area)**: Static area properties (lighting, fog, grass)
- **[GIT](GFF-File-Format#git-game-instance-template)**: Dynamic object instances (creatures, doors, etc.)

**Save Game Integration:**

- [IFO](GFF-File-Format#ifo-module-info) saved with current state
- Entry position updated to save location
- Module scripts preserved
- Mod_IsSaveGame [flag](GFF-File-Format#gff-data-types) set

**Module Transitions:**

- When transitioning to new module:
  1. Current module [IFO](GFF-File-Format#ifo-module-info) updated with player position
  2. Current module saved to save game
  3. New module [IFO](GFF-File-Format#ifo-module-info) loaded
  4. Player spawned at new Entry position (or LinkedTo waypoint)

**Multi-Area Modules (KotOR2):**

- Mod_Area_list contains multiple areas
- Areas loaded as needed
- Transitions within module don't fire OnModStart
- Shared module-level state

**Single-Area Modules (KotOR1):**

- Typical KotOR1 pattern
- One area per [IFO](GFF-File-Format#ifo-module-info)
- Module transition = area transition
- Simpler resource management

**Script Scope Hierarchy:**

1. **Module Scripts** ([IFO](GFF-File-Format#ifo-module-info)): Highest scope, module-wide
2. **Area Scripts** ([ARE](GFF-File-Format#are-area)): Area-specific events
3. **Object Scripts** ([UTC](GFF-File-Format#utc-creature)/[UTD](GFF-File-Format#utd-door)/etc.): Individual object events

**Common Module Configurations:**

**Story Modules:**

- Specific entry position for narrative flow
- StartMovie for cinematics
- OnModStart for dialogue/cutscenes
- Custom HAKs for unique content

**Hub Modules:**

- Central entry position (hub center)
- Multiple area transitions
- Vendors, NPCs, quest givers
- No start movie typically

**Combat Modules:**

- Entry position near enemies
- OnModStart spawns for ambush
- Battle music configured
- XPScale adjusted for difficulty

**Tutorial Modules:**

- Guided entry position
- OnModStart tutorial dialogue
- Reduced XPScale
- Special script hooks for teaching mechanics
