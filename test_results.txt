
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_float_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 932, in test_addition_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_float_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  result = <TestCaseFunction test_addition_assignment_float_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82729.3892805\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  method = <bound method TestNCSCompiler.test_addition_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>>\n\nFunction \'test_addition_assignment_float_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:932:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  script = \'\\n            void main()\\n            {\\n                float value = 1.0;\\n                value += 2.0;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D561940>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 932, in test_addition_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [  0%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_float_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 951, in test_addition_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_float_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  result = <TestCaseFunction test_addition_assignment_float_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82729.8636544\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  method = <bound method TestNCSCompiler.test_addition_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>>\n\nFunction \'test_addition_assignment_float_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:951:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  script = \'\\n            void main()\\n            {\\n                float value = 1.0;\\n                value += 2;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DCA74D0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 951, in test_addition_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' [  1%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_int_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 924, in test_addition_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_int_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  result = <TestCaseFunction test_addition_assignment_int_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82730.1659957\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  method = <bound method TestNCSCompiler.test_addition_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>>\n\nFunction \'test_addition_assignment_int_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:924:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 924, in test_addition_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [  1%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 890, in test_addition_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  result = <TestCaseFunction test_addition_assignment_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82730.4791801\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  method = <bound method TestNCSCompiler.test_addition_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>>\n\nFunction \'test_addition_assignment_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:890:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  script = \'\\n            void main()\\n            {\\n                int value = 1;\\n                value += 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6D5BA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 890, in test_addition_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [  2%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_string_string PASSED [  2%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addop_float_float PASSED [  3%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addop_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 293, in test_addop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  result = <TestCaseFunction test_addop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82731.3460715\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  method = <bound method TestNCSCompiler.test_addop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>>\n\nFunction \'test_addop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:293:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=15],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=15],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 293, in test_addop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [  3%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addop_string_string PASSED [  4%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 825, in test_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  result = <TestCaseFunction test_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82731.9546895\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  method = <bound method TestNCSCompiler.test_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>>\n\nFunction \'test_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:825:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 825, in test_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [  4%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment_complex FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 832, in test_assignment_complex\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignment_complex>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  result = <TestCaseFunction test_assignment_complex>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignment_complex of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82732.2443125\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  method = <bound method TestNCSCompiler.test_assignment_complex of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>>\n\nFunction \'test_assignment_complex\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:832:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  script = \'\\n            void main()\\n            {\\n                int a = 1;\\n                a = a * 2 + 8;\\n\\n                PrintInteger(a);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D69A150>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 832, in test_assignment_complex\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [  5%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment_string_constant PASSED [  5%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment_string_enginecall PASSED [  6%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignmentless_expression FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3690, in test_assignmentless_expression\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignmentless_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  result = <TestCaseFunction test_assignmentless_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignmentless_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.1415434\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  method = <bound method TestNCSCompiler.test_assignmentless_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>>\n\nFunction \'test_assignmentless_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3690:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  script = \'\\n            void main()\\n            {\\n                int a = 123;\\n\\n                1;\\n                GetCheatCode(1);\\n                "abc";\\n\\n                PrintInteger(a);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991C246CF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3690, in test_assignmentless_expression\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [  7%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bidmas FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 488, in test_bidmas\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -56 is out of range\n\nValueError: Stack offset -56 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bidmas>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  result = <TestCaseFunction test_bidmas>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bidmas of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.5307057\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  method = <bound method TestNCSCompiler.test_bidmas of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>>\n\nFunction \'test_bidmas\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:488:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None)\n  index = 27\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=17],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -56\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -56\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=17],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -56\n  msg = \'Stack offset -56 is out of range\'\n  remaining = 48\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 488, in test_bidmas\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -56 is out of range\n' [  7%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_and_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1117, in test_bitwise_and_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_and_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  result = <TestCaseFunction test_bitwise_and_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_and_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.8392123\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_and_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>>\n\nFunction \'test_bitwise_and_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1117:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value &= 0x0F;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6AF040>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1117, in test_bitwise_and_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [  8%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_and_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 771, in test_bitwise_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_and_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  result = <TestCaseFunction test_bitwise_and_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82734.224849\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  method = <bound method TestNCSCompiler.test_bitwise_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>>\n\nFunction \'test_bitwise_and_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:771:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 771, in test_bitwise_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [  8%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_assignment_with_expression FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1244, in test_bitwise_assignment_with_expression\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_assignment_with_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  result = <TestCaseFunction test_bitwise_assignment_with_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_assignment_with_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82734.5886235\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  method = <bound method TestNCSCompiler.test_bitwise_assignment_with_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>>\n\nFunction \'test_bitwise_assignment_with_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1244:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value &= 0x0F | 0x10;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E138290>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1244, in test_bitwise_assignment_with_expression\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [  9%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_left_shift_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1180, in test_bitwise_left_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_left_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  result = <TestCaseFunction test_bitwise_left_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_left_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.0358668\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_left_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>>\n\nFunction \'test_bitwise_left_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1180:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 7;\\n                value <<= 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DDFF120>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1180, in test_bitwise_left_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [  9%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_not_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 755, in test_bitwise_not_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_not_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  result = <TestCaseFunction test_bitwise_not_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_not_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.446372\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  method = <bound method TestNCSCompiler.test_bitwise_not_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>>\n\nFunction \'test_bitwise_not_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:755:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=-2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=-2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 755, in test_bitwise_not_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 10%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_or_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1138, in test_bitwise_or_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_or_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  result = <TestCaseFunction test_bitwise_or_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_or_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.7572838\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_or_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>>\n\nFunction \'test_bitwise_or_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1138:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0x0F;\\n                value |= 0xF0;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E0F54F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1138, in test_bitwise_or_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 10%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_or_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 723, in test_bitwise_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_or_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  result = <TestCaseFunction test_bitwise_or_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.071026\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  method = <bound method TestNCSCompiler.test_bitwise_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>>\n\nFunction \'test_bitwise_or_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:723:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=7],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=7],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 723, in test_bitwise_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 11%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_right_shift_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1201, in test_bitwise_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_right_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  result = <TestCaseFunction test_bitwise_right_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.3898339\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>>\n\nFunction \'test_bitwise_right_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1201:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 28;\\n                value >>= 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBBE210>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1201, in test_bitwise_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 11%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_shiftleft_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 787, in test_bitwise_shiftleft_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_shiftleft_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  result = <TestCaseFunction test_bitwise_shiftleft_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_shiftleft_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.8920613\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  method = <bound method TestNCSCompiler.test_bitwise_shiftleft_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>>\n\nFunction \'test_bitwise_shiftleft_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:787:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=28],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=28],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 787, in test_bitwise_shiftleft_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 12%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_shiftright_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 803, in test_bitwise_shiftright_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_shiftright_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  result = <TestCaseFunction test_bitwise_shiftright_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_shiftright_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82737.9226129\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  method = <bound method TestNCSCompiler.test_bitwise_shiftright_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>>\n\nFunction \'test_bitwise_shiftright_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:803:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 803, in test_bitwise_shiftright_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 12%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_unsigned_right_shift_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1222, in test_bitwise_unsigned_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_unsigned_right_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  result = <TestCaseFunction test_bitwise_unsigned_right_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82738.3985251\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>>\n\nFunction \'test_bitwise_unsigned_right_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1222:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0x80000000;\\n                value >>>= 1;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2BA890>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1222, in test_bitwise_unsigned_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 13%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_unsigned_right_shift_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1319, in test_bitwise_unsigned_right_shift_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_unsigned_right_shift_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  result = <TestCaseFunction test_bitwise_unsigned_right_shift_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82738.9696567\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  method = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>>\n\nFunction \'test_bitwise_unsigned_right_shift_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1319:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1073741824],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1073741824],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1319, in test_bitwise_unsigned_right_shift_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 14%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_xor_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1159, in test_bitwise_xor_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_xor_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  result = <TestCaseFunction test_bitwise_xor_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_xor_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82739.7172056\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_xor_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>>\n\nFunction \'test_bitwise_xor_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1159:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value ^= 0x0F;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E1937E0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1159, in test_bitwise_xor_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 14%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_xor_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 739, in test_bitwise_xor_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_xor_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  result = <TestCaseFunction test_bitwise_xor_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_xor_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82740.5085038\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  method = <bound method TestNCSCompiler.test_bitwise_xor_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>>\n\nFunction \'test_bitwise_xor_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:739:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 739, in test_bitwise_xor_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 15%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_int_with_no_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3393, in test_call_int_with_no_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_int_with_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  result = <TestCaseFunction test_call_int_with_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_int_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82741.9537873\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  method = <bound method TestNCSCompiler.test_call_int_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>>\n\nFunction \'test_call_int_with_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3393:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3393, in test_call_int_with_no_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 15%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_int_with_no_args_and_forward_declared FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3418, in test_call_int_with_no_args_and_forward_declared\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_int_with_no_args_and_forward_declared>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  result = <TestCaseFunction test_call_int_with_no_args_and_forward_declared>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_int_with_no_args_and_forward_declared of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declare...\n  expecting_failure = False\n  outcome = None\n  start_time = 82742.7850886\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  method = <bound method TestNCSCompiler.test_call_int_with_no_args_and_forward_declared of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declare...\n\nFunction \'test_call_int_with_no_args_and_forward_declared\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3418:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3418, in test_call_int_with_no_args_and_forward_declared\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 16%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_param_mismatch PASSED [ 16%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_undefined PASSED [ 17%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_no_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3309, in test_call_void_with_no_args\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  result = <TestCaseFunction test_call_void_with_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82745.0531273\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  method = <bound method TestNCSCompiler.test_call_void_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>>\n\nFunction \'test_call_void_with_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3309:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  script = \'\\n            void test()\\n            {\\n                PrintInteger(123);\\n            }\\n\\n            void main()\\n            {\\n                test();\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n        _break_scope=Fa...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n        _break_scope=Fa...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3309, in test_call_void_with_no_args\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 17%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_one_arg FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3331, in test_call_void_with_one_arg\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_one_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  result = <TestCaseFunction test_call_void_with_one_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_one_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82745.675219\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  method = <bound method TestNCSCompiler.test_call_void_with_one_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>>\n\nFunction \'test_call_void_with_one_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3331:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  script = \'\\n            void test(int value)\\n            {\\n                PrintInteger(value);\\n            }\\n\\n            void main()\\n            {\\n                test(123);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n        _break_scope=Fa...,\n    line_num=7\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n        _break_scope=Fa...,\n    line_num=7\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=123)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3331, in test_call_void_with_one_arg\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 18%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_two_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3353, in test_call_void_with_two_args\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_two_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  result = <TestCaseFunction test_call_void_with_two_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_two_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82746.2406897\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  method = <bound method TestNCSCompiler.test_call_void_with_two_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>>\n\nFunction \'test_call_void_with_two_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3353:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  script = \'\\n            void test(int value1, int value2)\\n            {\\n                PrintInteger(value1);\\n                PrintInteger(value2);\\n            }\\n\\n            void main()\\n            {\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=1), IntExpression(value=2)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3353, in test_call_void_with_two_args\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 18%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_comment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3664, in test_comment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_comment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  result = <TestCaseFunction test_comment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_comment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82746.9216117\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  method = <bound method TestNCSCompiler.test_comment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>>\n\nFunction \'test_comment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3664:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3664, in test_comment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 19%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_greaterthan_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 630, in test_compare_greaterthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_greaterthan_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  result = <TestCaseFunction test_compare_greaterthan_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_greaterthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82747.6747935\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  method = <bound method TestNCSCompiler.test_compare_greaterthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>>\n\nFunction \'test_compare_greaterthan_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:630:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 630, in test_compare_greaterthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 20%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_greaterthanorequal_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 654, in test_compare_greaterthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_greaterthanorequal_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  result = <TestCaseFunction test_compare_greaterthanorequal_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_greaterthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82748.614422\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  method = <bound method TestNCSCompiler.test_compare_greaterthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>>\n\nFunction \'test_compare_greaterthanorequal_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:654:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 654, in test_compare_greaterthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 20%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_lessthan_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 678, in test_compare_lessthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_lessthan_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  result = <TestCaseFunction test_compare_lessthan_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_lessthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82749.5467762\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  method = <bound method TestNCSCompiler.test_compare_lessthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>>\n\nFunction \'test_compare_lessthan_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:678:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 678, in test_compare_lessthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 21%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_lessthanorequal_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 702, in test_compare_lessthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_lessthanorequal_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  result = <TestCaseFunction test_compare_lessthanorequal_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_lessthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82750.5213929\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  method = <bound method TestNCSCompiler.test_compare_lessthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>>\n\nFunction \'test_compare_lessthanorequal_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:702:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 702, in test_compare_lessthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 21%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_complex_expression_precedence FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3971, in test_complex_expression_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -28 is out of range\n\nValueError: Stack offset -28 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_complex_expression_precedence>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  result = <TestCaseFunction test_complex_expression_precedence>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_complex_expression_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82751.1207034\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  method = <bound method TestNCSCompiler.test_complex_expression_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>>\n\nFunction \'test_complex_expression_precedence\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3971:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -28\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -28\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -28\n  msg = \'Stack offset -28 is out of range\'\n  remaining = 20\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3971, in test_complex_expression_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -28 is out of range\n' [ 22%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_assignment_error PASSED [ 22%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_bitwise_assignment_error PASSED [ 23%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_compound_assignment_error PASSED [ 23%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_global_declaration PASSED [ 24%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_global_initialization FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1346, in test_const_global_initialization\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_global_initialization>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  result = <TestCaseFunction test_const_global_initialization>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_global_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82753.2221259\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  method = <bound method TestNCSCompiler.test_const_global_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>>\n\nFunction \'test_const_global_initialization\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1346:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  script = \'\\n            const float PI = 3.14159f;\\n            const string GREETING = "Hello";\\n\\n            void main()\\n            {\\n                PrintFloat(PI);\\n                PrintString(GREETING...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.format...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E1917F0>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'GREETING\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.STRING(string), struct=None),\n    expression=StringExpression(value=Hello),\n    is_const=True\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.format...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintString\', [ScriptParam(<DataType.STRING: \'string\'>, \'sString\', None)], \'// 1: Output sString to the log ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1346, in test_const_global_initialization\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 24%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_increment_error PASSED [ 25%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_local_declaration FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1367, in test_const_local_declaration\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'local_const\'\n\nCompileError: Cannot assign to const variable \'local_const\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_local_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  result = <TestCaseFunction test_const_local_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_local_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82754.0672587\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  method = <bound method TestNCSCompiler.test_const_local_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>>\n\nFunction \'test_const_local_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1367:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  script = \'\\n            void main()\\n            {\\n                const int local_const = 100;\\n                PrintInteger(local_const);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991DDDF3B0>],\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991DDDF3B0>],\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'local_const\'\n    ),\n    expression=IntExpression(value=100)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'local_const\'\n    ),\n    expression=IntExpression(value=100)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'local_const\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E11AB70>]\n    ),\n    expression=IntExpression(value=100)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E11AB70>]\n    ),\n    expression=IntExpression(value=100)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'local_const\'\n  msg = "Cannot assign to const variable \'local_const\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1367, in test_const_local_declaration\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'local_const\'\n' [ 25%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_local_initialization FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1384, in test_const_local_initialization\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n\nCompileError: Cannot assign to const variable \'a\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_local_initialization>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  result = <TestCaseFunction test_const_local_initialization>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_local_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82754.6521833\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  method = <bound method TestNCSCompiler.test_const_local_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>>\n\nFunction \'test_const_local_initialization\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1384:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  script = \'\\n            void main()\\n            {\\n                const int a = 10;\\n                const int b = a * 2;\\n                PrintInteger(b);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E6CA210>],\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E6CA210>],\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=10)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=10)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'a\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E3EED50>]\n    ),\n    expression=IntExpression(value=10)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E3EED50>]\n    ),\n    expression=IntExpression(value=10)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'a\'\n  msg = "Cannot assign to const variable \'a\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1384, in test_const_local_initialization\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n' [ 26%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_multi_declaration FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1454, in test_const_multi_declaration\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n\nCompileError: Cannot assign to const variable \'a\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_multi_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  result = <TestCaseFunction test_const_multi_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_multi_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82755.1215104\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  method = <bound method TestNCSCompiler.test_const_multi_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>>\n\nFunction \'test_const_multi_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1454:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  script = \'\\n            void main()\\n            {\\n                const int a = 1, b = 2, c = 3;\\n                PrintInteger(a);\\n                PrintInteger(b);\\n                PrintInteger(c);\\n       ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E458590>, <pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E...,\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E458590>, <pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E...,\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=1)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=1)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'a\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6B8D20>]\n    ),\n    expression=IntExpression(value=1)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6B8D20>]\n    ),\n    expression=IntExpression(value=1)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'a\'\n  msg = "Cannot assign to const variable \'a\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1454, in test_const_multi_declaration\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n' [ 27%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_declaration_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2620, in test_declaration_float\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_declaration_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  result = <TestCaseFunction test_declaration_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_declaration_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82756.0831603\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  method = <bound method TestNCSCompiler.test_declaration_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>>\n\nFunction \'test_declaration_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2620:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  script = \'\\n            void main()\\n            {\\n                float a;\\n                PrintFloat(a);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E32F460>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2620, in test_declaration_float\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 27%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_declaration_int PASSED [ 28%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_declaration_string PASSED [ 28%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_division_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1096, in test_division_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_division_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  result = <TestCaseFunction test_division_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82757.937909\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  method = <bound method TestNCSCompiler.test_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>>\n\nFunction \'test_division_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1096:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 12;\\n                value /= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E3AFF50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1096, in test_division_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 29%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_divop_float_float PASSED [ 29%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_divop_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 405, in test_divop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_divop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  result = <TestCaseFunction test_divop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_divop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82758.8096631\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  method = <bound method TestNCSCompiler.test_divop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>>\n\nFunction \'test_divop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:405:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 405, in test_divop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 30%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1937, in test_do_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  result = <TestCaseFunction test_do_while_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.1556132\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  method = <bound method TestNCSCompiler.test_do_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>>\n\nFunction \'test_do_while_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1937:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E47C4D0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=SubtractionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6AD090>]\n        ),\n       ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1937, in test_do_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 30%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_scope FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2029, in test_do_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  result = <TestCaseFunction test_do_while_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.5672198\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  method = <bound method TestNCSCompiler.test_do_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>>\n\nFunction \'test_do_while_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2029:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2029, in test_do_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 31%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_with_break FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1961, in test_do_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  result = <TestCaseFunction test_do_while_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.9364615\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  method = <bound method TestNCSCompiler.test_do_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>>\n\nFunction \'test_do_while_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1961:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E985D90>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = BreakStatement(\n    line_num=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1961, in test_do_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 31%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_with_continue FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1984, in test_do_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  result = <TestCaseFunction test_do_while_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82760.3766772\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_do_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>>\n\nFunction \'test_do_while_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1984:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE81A30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1984, in test_do_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 32%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_double_prototype PASSED [ 32%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall PASSED [ 33%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_GetFactionEqual FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 268, in test_enginecall_GetFactionEqual\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_GetFactionEqual>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  result = <TestCaseFunction test_enginecall_GetFactionEqual>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_GetFactionEqual of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82761.5728118\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  method = <bound method TestNCSCompiler.test_enginecall_GetFactionEqual of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>>\n\nFunction \'test_enginecall_GetFactionEqual\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:268:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  script = \'\\n            void main()\\n            {\\n                object oFirst;\\n                GetFactionEqual(oFirst);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E6D50F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.INT: \'int\'>, \'GetFactionEqual\', [ScriptParam(<DataType.OBJECT: \'object\'>, \'oFirstObject\', None), ScriptParam(<DataType.OBJEC...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 268, in test_enginecall_GetFactionEqual\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 34%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_GetFirstObjectInShape_defaults FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 254, in test_enginecall_GetFirstObjectInShape_defaults\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_GetFirstObjectInShape_defaults>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  result = <TestCaseFunction test_enginecall_GetFirstObjectInShape_defaults>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_GetFirstObjectInShape_defaults of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>...\n  expecting_failure = False\n  outcome = None\n  start_time = 82762.085302\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  method = <bound method TestNCSCompiler.test_enginecall_GetFirstObjectInShape_defaults of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>...\n\nFunction \'test_enginecall_GetFirstObjectInShape_defaults\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:254:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  script = \'\\n            void main()\\n            {\\n                int nShape = SHAPE_CUBE;\\n                float fSize = 0.0;\\n                location lTarget;\\n                GetFirstObjectInShape(nShape...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ECF0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E924050>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.OBJECT: \'object\'>, \'GetFirstObjectInShape\', [ScriptParam(<DataType.INT: \'int\'>, \'nShape\', None), ScriptParam(<DataType.FLOAT...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 254, in test_enginecall_GetFirstObjectInShape_defaults\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 34%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_delay_command_1 FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 242, in test_enginecall_delay_command_1\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_delay_command_1>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  result = <TestCaseFunction test_enginecall_delay_command_1>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_delay_command_1 of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82762.6017027\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  method = <bound method TestNCSCompiler.test_enginecall_delay_command_1 of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>>\n\nFunction \'test_enginecall_delay_command_1\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:242:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  script = \'\\n            void main()\\n            {\\n                object oFirstPlayer = GetFirstPC();\\n                DelayCommand(1.0, GiveXPToCreature(oFirstPlayer, 9001));\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E6D5A90>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'DelayCommand\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fSeconds\', None), ScriptParam(<DataType.ACTION: \'act...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 242, in test_enginecall_delay_command_1\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 35%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_return_value PASSED [ 35%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_default_params FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 214, in test_enginecall_with_default_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1114, in copy_to_top\n    raise IndexError(msg)\nIndexError: Offset -16 exceeds stack size 12\n\nIndexError: Offset -16 exceeds stack size 12\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_with_default_params>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  result = <TestCaseFunction test_enginecall_with_default_params>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_with_default_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82763.9827426\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  method = <bound method TestNCSCompiler.test_enginecall_with_default_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>>\n\nFunction \'test_enginecall_with_default_params\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:214:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:134:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None)\n  index = 9\n  jump_value = None\n\nFunction \'copy_to_top\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1114:\n  self = Stack(\n    _stack=[STRING=something, OBJECT=1, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  msg = \'Offset -16 exceeds stack size 12\'\n  offset_abs = 16\n  total_bytes = 12\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 214, in test_enginecall_with_default_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1114, in copy_to_top\n    raise IndexError(msg)\nIndexError: Offset -16 exceeds stack size 12\n' [ 36%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_missing_params PASSED [ 36%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_params FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 195, in test_enginecall_with_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 140, in step_execute\n    self.do_action(\n    ~~~~~~~~~~~~~~^\n        self._functions[cursor.args[0]],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        cursor.args[1],\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 476, in do_action\n    raise ValueError(msg)\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\n\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_with_params>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  result = <TestCaseFunction test_enginecall_with_params>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_with_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82765.1479883\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  method = <bound method TestNCSCompiler.test_enginecall_with_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>>\n\nFunction \'test_enginecall_with_params\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:195:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:140:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=ACTION, args=[200, 2], jump=None)\n  index = 14\n  jump_value = None\n\nFunction \'do_action\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:476:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n  function = ScriptFunction(<DataType.OBJECT: \'object\'>, \'GetObjectByTag\', [ScriptParam(<DataType.STRING: \'string\'>, \'sTag\', None), ScriptParam(<DataType.INT: \'int\'>, \'nNth\', \'0\')], \'// 200: Get the nNth object with the specified tag.\\r\\n// - sTag\\r\\n// - nNth: the nth object with this tag may be requested\\r\\n// * Returns OBJECT_INVALID if the object cannot be found.\\r\\nobject GetObjectByTag(string sTag, int nNth=0);\', \'// 200: Get the nNth object with the specified tag.\\r\\n// - sTag\\r\\n// - nNth: the nth object with this tag may be requested\\r\\n// * Returns OBJECT_INVALID if the object cannot be found.\\r\\nobject GetObjectByTag(string sTag, int nNth=0);\')\n  args = 2\n  msg = "Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'"\n  args_snap = [INT=15, INT=0]\n  i = 0\n  param_index = 0\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 195, in test_enginecall_with_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 140, in step_execute\n    self.do_action(\n    ~~~~~~~~~~~~~~^\n        self._functions[cursor.args[0]],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        cursor.args[1],\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 476, in do_action\n    raise ValueError(msg)\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\n' [ 37%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_too_many_params PASSED [ 37%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_expression_with_all_operators FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3992, in test_expression_with_all_operators\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_expression_with_all_operators>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  result = <TestCaseFunction test_expression_with_all_operators>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_expression_with_all_operators of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.0978838\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  method = <bound method TestNCSCompiler.test_expression_with_all_operators of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>>\n\nFunction \'test_expression_with_all_operators\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3992:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3992, in test_expression_with_all_operators\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 38%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_float_notations FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2657, in test_float_notations\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_float_notations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  result = <TestCaseFunction test_float_notations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_float_notations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.4568606\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  method = <bound method TestNCSCompiler.test_float_notations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>>\n\nFunction \'test_float_notations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2657:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  script = \'\\n            void main()\\n            {\\n                PrintFloat(1.0f);\\n                PrintFloat(2.0);\\n                PrintFloat(3f);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.format...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.format...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2657, in test_float_notations\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 38%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2037, in test_for_loop\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  result = <TestCaseFunction test_for_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.8386607\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  method = <bound method TestNCSCompiler.test_for_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>>\n\nFunction \'test_for_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2037:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                }\\n       ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF93690>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991D563E00...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E937340>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E936440>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n            _parent=None,\n  ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2037, in test_for_loop\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' [ 39%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_scope FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2107, in test_for_loop_scope\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  result = <TestCaseFunction test_for_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82767.2326452\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  method = <bound method TestNCSCompiler.test_for_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>>\n\nFunction \'test_for_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2107:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  script = \'\\n            void main()\\n            {\\n                int i = 11;\\n                int outer = 22;\\n                for (i = 0; i <= 5; i += 1)\\n                {\\n                    int inner =...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E509370>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EB5F310>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2107, in test_for_loop_scope\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' [ 40%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_with_break FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2060, in test_for_loop_with_break\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  result = <TestCaseFunction test_for_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82767.6684771\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  method = <bound method TestNCSCompiler.test_for_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>>\n\nFunction \'test_for_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2060:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                    break;...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E9BBB60>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E7F6350...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EF9E2B0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EF9E120>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n            _parent=None,\n  ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2060, in test_for_loop_with_break\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' [ 40%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_with_continue FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2082, in test_for_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2590, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, updatestart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  result = <TestCaseFunction test_for_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82768.0215883\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_for_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>>\n\nFunction \'test_for_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2082:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                    contin...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EAF8FF0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E98D4F0>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2590:\n  self = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EAF8FF0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E98D4F0>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  initial_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  updatestart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EA16C30>, <pykotor.resource.formats.ncs.compiler.classes.ContinueStatement object at 0x000001991EC4...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2082, in test_for_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2590, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, updatestart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 41%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_bitwise_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1284, in test_global_bitwise_assignment\n    assert snap.arg_values == [15]  # 0xFF & 0x0F = 0x0F = 15\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\n\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_bitwise_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  result = <TestCaseFunction test_global_bitwise_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_bitwise_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82768.4415745\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  method = <bound method TestNCSCompiler.test_global_bitwise_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>>\n\nFunction \'test_global_bitwise_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1284:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  ncs = NCS(#0: RSADDI; #1: CONSTI(255); #2: CPDOWNSP(-8, 4); ... (19 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: RSADDI; #1: CONSTI(255); #2: CPDOWNSP(-8, 4); ... (19 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757156812720: 0, 1757156803424: 1, 1757156805776: 2, 1757156813392: 3, 1757156808800: 4, 1757157421728: 5, 1757157421840: 6, 1757157414112: 7, 1...<truncated>\n  snap = ActionSnapshot(function_name=\'PrintInteger\', arg_values=[INT=0], return_value=None)\n  @py_assert1 = [INT=0]\n  @py_assert4 = [15]\n  @py_assert3 = False\n  @py_format6 = \'[INT=0] == [15]\\n~\\n~At index 0 diff: INT=0 != 15\\n~\\n~Full diff:\\n~  [\\n~-     15,\\n~+     INT=0,\\n~  ]\'\n  @py_format8 = \'assert [INT=0] == [15]\\n~\\n~At index 0 diff: INT=0 != 15\\n~\\n~Full diff:\\n~  [\\n~-     15,\\n~+     INT=0,\\n~  ]\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1284, in test_global_bitwise_assignment\n    assert snap.arg_values == [15]  # 0xFF & 0x0F = 0x0F = 15\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\n' [ 41%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_declarations PASSED [ 42%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_initialization_with_unary PASSED [ 42%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_initializations FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2447, in test_global_initializations\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_initializations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  result = <TestCaseFunction test_global_initializations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_initializations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82785.9539377\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  method = <bound method TestNCSCompiler.test_global_initializations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>>\n\nFunction \'test_global_initializations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2447:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  script = \'\\n            int INT = 0;\\n            float FLOAT = 0.0;\\n            string STRING = "";\\n            vector VECTOR = [0.0, 0.0, 0.0];\\n\\n            void main()\\n            {\\n                Pr...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.format...,\n    line_num=7\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EBE5DA0>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'VECTOR\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.VECTOR(vector), struct=None),\n    expression=VectorExpression(x=FloatExpression(value=0.0), y=FloatExpression(value=0.0), z=FloatExpression(value=0.0)),\n    is_const=False\n)\n  entry_index = 21\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.format...,\n    line_num=7\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintString\', [ScriptParam(<DataType.STRING: \'string\'>, \'sString\', None)], \'// 1: Output sString to the log ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2447, in test_global_initializations\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 43%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_addition_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2491, in test_global_int_addition_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_addition_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  result = <TestCaseFunction test_global_int_addition_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_addition_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82788.3033634\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_addition_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>>\n\nFunction \'test_global_int_addition_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2491:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 2;\\n\\n            void main()\\n            {\\n                int local1 = 3;\\n                int local2 = 4;\\n\\n                global1 += ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F21D860>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=2),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA7B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F21C520>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2491, in test_global_int_addition_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 43%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_division_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2575, in test_global_int_division_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_division_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  result = <TestCaseFunction test_global_int_division_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82790.347039\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>>\n\nFunction \'test_global_int_division_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2575:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  script = \'\\n            int global1 = 1000;\\n            int global2 = 100;\\n\\n            void main()\\n            {\\n                int local1 = 10;\\n                int local2 = 1;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F269320>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=100),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8770>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F2694E0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2575, in test_global_int_division_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 44%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_multiplication_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2547, in test_global_int_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_multiplication_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  result = <TestCaseFunction test_global_int_multiplication_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82793.0512667\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>>\n\nFunction \'test_global_int_multiplication_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2547:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 10;\\n\\n            void main()\\n            {\\n                int local1 = 100;\\n                int local2 = 1000;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F110E50>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=10),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA870>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F26BE00>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2547, in test_global_int_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 44%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_subtraction_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2519, in test_global_int_subtraction_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_subtraction_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  result = <TestCaseFunction test_global_int_subtraction_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_subtraction_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82793.9697262\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_subtraction_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>>\n\nFunction \'test_global_int_subtraction_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2519:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 10;\\n\\n            void main()\\n            {\\n                int local1 = 100;\\n                int local2 = 1000;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F113850>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=10),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14AD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F112BA0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2519, in test_global_int_subtraction_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 45%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1674, in test_if\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  result = <TestCaseFunction test_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82794.8711525\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  method = <bound method TestNCSCompiler.test_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>>\n\nFunction \'test_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1674:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  script = \'\\n            void main()\\n            {\\n                if(0)\\n                {\\n                    PrintInteger(0);\\n                }\\n\\n                if(1)\\n                {\\n              ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991EAC4440>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991EAC4440>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA3C0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EF4F290>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EF4F290>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA3C0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1674, in test_if\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 45%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1716, in test_if_else\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  result = <TestCaseFunction test_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82796.9124773\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  method = <bound method TestNCSCompiler.test_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>>\n\nFunction \'test_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1716:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0) {    PrintInteger(0); }\\n                else {      PrintInteger(1); }\\n\\n                if (1) {    PrintInteger(2); }\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991DF22D50>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA4A0>],\n        _break_scope=False,\n...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991DF22D50>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA4A0>],\n        _break_scope=False,\n...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991ED4C670>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1F6B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1F6B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991ED4C670>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1716, in test_if_else\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 46%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else_if FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1738, in test_if_else_if\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  result = <TestCaseFunction test_if_else_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82799.5749412\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  method = <bound method TestNCSCompiler.test_if_else_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>>\n\nFunction \'test_if_else_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1738:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  script = \'\\n            void main()\\n            {\\n                if (0)      { PrintInteger(0); }\\n                else if (0) { PrintInteger(1); }\\n\\n                if (1)      { PrintInteger(2); } // hit...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F04C770>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C640>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F04C770>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C640>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF84AD0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F103FB0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F103FB0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF84AD0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1738, in test_if_else_if\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 47%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else_if_else FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1767, in test_if_else_if_else\n    ncs = self.compile(\n        """\n    ...<18 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  result = <TestCaseFunction test_if_else_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82801.5773761\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  method = <bound method TestNCSCompiler.test_if_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>>\n\nFunction \'test_if_else_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1767:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0)      { PrintInteger(0); }\\n                else if (0) { PrintInteger(1); }\\n                else        { PrintInteger(3); } // hit\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F10FCB0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10FAF0>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F10FCB0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10FAF0>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF86BA0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF32F0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF32F0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF86BA0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1767, in test_if_else_if_else\n    ncs = self.compile(\n        """\n    ...<18 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 47%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_multiple_conditions FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1699, in test_if_multiple_conditions\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_multiple_conditions>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  result = <TestCaseFunction test_if_multiple_conditions>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_multiple_conditions of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82803.6675882\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  method = <bound method TestNCSCompiler.test_if_multiple_conditions of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>>\n\nFunction \'test_if_multiple_conditions\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1699:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  script = \'\\n            void main()\\n            {\\n                if(1 && 2 && 3)\\n                {\\n                    PrintInteger(0);\\n                }\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F7C1EF0>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F7C1EF0>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=BinaryOperatorExpression(\n        expression1=BinaryOperatorExpression(\n            expression1=IntExpression(value=1),\n            expression2=IntExpression(value=2),\n            compatibil...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F76BD90>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF0A70>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF0A70>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F76BD90>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1699, in test_if_multiple_conditions\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 48%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_imported_global_variable PASSED [ 48%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_include_builtin FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3541, in test_include_builtin\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n        library={"otherscript": otherscript},\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_include_builtin>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  result = <TestCaseFunction test_include_builtin>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_include_builtin of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82809.7229541\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  method = <bound method TestNCSCompiler.test_include_builtin of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>>\n\nFunction \'test_include_builtin\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3541:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  otherscript = b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  script = \'\\n            #include "otherscript"\\n\\n            void main()\\n            {\\n                TestFunc();\\n            }\\n        \'\n  library = {\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = [<pykotor.resource.formats.ncs.compiler.classes.IncludeScript object at 0x000001991EC4B250>]\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  includes = []\n  include = IncludeScript(\n    file=StringExpression(value=otherscript),\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'}\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'TestFunc\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3541, in test_include_builtin\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n        library={"otherscript": otherscript},\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 49%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_include_lookup FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3562, in test_include_lookup\n    ncs: NCS = self.compile(\n               ~~~~~~~~~~~~^\n        """\n        ^^^\n    ...<7 lines>...\n        library_lookup=[includetest_script_path],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_include_lookup>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  result = <TestCaseFunction test_include_lookup>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_include_lookup of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82812.114544\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  method = <bound method TestNCSCompiler.test_include_lookup of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>>\n\nFunction \'test_include_lookup\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3562:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  includetest_script_path = WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  script = \'\\n            #include "includetest"\\n\\n            void main()\\n            {\\n                TestFunc();\\n            }\\n        \'\n  library = {}\n  library_lookup = [WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n  normalized_lookup = [WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n  first_item = WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = [<pykotor.resource.formats.ncs.compiler.classes.IncludeScript object at 0x000001991F36B110>]\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  includes = []\n  include = IncludeScript(\n    file=StringExpression(value=includetest),\n    library={}\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'TestFunc\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3562, in test_include_lookup\n    ncs: NCS = self.compile(\n               ~~~~~~~~~~~~^\n        """\n        ^^^\n    ...<7 lines>...\n        library_lookup=[includetest_script_path],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 49%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_int_parenthesis_declaration FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3525, in test_int_parenthesis_declaration\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_int_parenthesis_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  result = <TestCaseFunction test_int_parenthesis_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_int_parenthesis_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82813.9909028\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  method = <bound method TestNCSCompiler.test_int_parenthesis_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>>\n\nFunction \'test_int_parenthesis_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3525:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=123],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=123],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3525, in test_int_parenthesis_declaration\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 50%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_local_declarations PASSED [ 50%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_and_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 547, in test_logical_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_and_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  result = <TestCaseFunction test_logical_and_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82816.6658477\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  method = <bound method TestNCSCompiler.test_logical_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>>\n\nFunction \'test_logical_and_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:547:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 547, in test_logical_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 51%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_equals FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 586, in test_logical_equals\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_equals>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  result = <TestCaseFunction test_logical_equals>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_equals of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82818.3860818\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  method = <bound method TestNCSCompiler.test_logical_equals of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>>\n\nFunction \'test_logical_equals\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:586:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 586, in test_logical_equals\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 51%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_notequals_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 604, in test_logical_notequals_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_notequals_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  result = <TestCaseFunction test_logical_notequals_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_notequals_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82820.5488276\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  method = <bound method TestNCSCompiler.test_logical_notequals_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>>\n\nFunction \'test_logical_notequals_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:604:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 604, in test_logical_notequals_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 52%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_or_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 567, in test_logical_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_or_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  result = <TestCaseFunction test_logical_or_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82821.492427\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  method = <bound method TestNCSCompiler.test_logical_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>>\n\nFunction \'test_logical_or_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:567:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 567, in test_logical_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 52%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_missing_include PASSED [ 53%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_modop_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 437, in test_modop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_modop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  result = <TestCaseFunction test_modop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_modop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82824.9839435\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  method = <bound method TestNCSCompiler.test_modop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>>\n\nFunction \'test_modop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:437:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 437, in test_modop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 54%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_modulo_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1288, in test_modulo_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_modulo_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  result = <TestCaseFunction test_modulo_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_modulo_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82826.5323436\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  method = <bound method TestNCSCompiler.test_modulo_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>>\n\nFunction \'test_modulo_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1288:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 17;\\n                value %= 5;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D5D64A0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1288, in test_modulo_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 54%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_mulop_float_float PASSED [ 55%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_mulop_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 373, in test_mulop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_mulop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  result = <TestCaseFunction test_mulop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_mulop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82828.984203\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  method = <bound method TestNCSCompiler.test_mulop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>>\n\nFunction \'test_mulop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:373:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=50],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=50],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 373, in test_mulop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 55%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_multi_declarations FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2395, in test_multi_declarations\n    assert interpreter.action_snapshots[-3].arg_values[0] == 0\nAssertionError: assert INT=1 == 0\n\nAssertionError: assert INT=1 == 0\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_multi_declarations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  result = <TestCaseFunction test_multi_declarations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_multi_declarations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82829.8826656\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  method = <bound method TestNCSCompiler.test_multi_declarations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>>\n\nFunction \'test_multi_declarations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2395:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757166342832: 0, 1757166339920: 1, 1757172441264: 2, 1757172435776: 3, 1757172438016: 4, 1757172441936: 5, 1757172442496: 6, 1757172442832: 7, 1757172447536: 8, 1...<truncated>\n  @py_assert0 = INT=1\n  @py_assert3 = 0\n  @py_assert2 = False\n  @py_format5 = \'INT=1 == 0\'\n  @py_format7 = \'assert INT=1 == 0\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2395, in test_multi_declarations\n    assert interpreter.action_snapshots[-3].arg_values[0] == 0\nAssertionError: assert INT=1 == 0\n' [ 56%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_multiline_comment PASSED [ 56%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_multiplication_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1075, in test_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_multiplication_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  result = <TestCaseFunction test_multiplication_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82831.8966654\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  method = <bound method TestNCSCompiler.test_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>>\n\nFunction \'test_multiplication_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1075:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 10;\\n                value *= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F33E120>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1075, in test_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 57%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_negop_float PASSED [ 57%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_negop_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 454, in test_negop_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_negop_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  result = <TestCaseFunction test_negop_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_negop_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82833.768683\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  method = <bound method TestNCSCompiler.test_negop_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>>\n\nFunction \'test_negop_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:454:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=-10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=-10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 454, in test_negop_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 58%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_nested_include PASSED [ 58%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_nested_struct_access FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3921, in test_nested_struct_access\n    ncs = self.compile(\n        """\n    ...<19 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2336, in compile\n    root.struct_map[struct_name].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 266, in initialize\n    member.initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 317, in initialize\n    root.struct_map[self.identifier.label].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nKeyError: \'inner\'\n\nKeyError: \'inner\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_nested_struct_access>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  result = <TestCaseFunction test_nested_struct_access>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_nested_struct_access of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82838.5923814\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  method = <bound method TestNCSCompiler.test_nested_struct_access of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>>\n\nFunction \'test_nested_struct_access\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3921:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  script = \'\\n            struct Inner\\n            {\\n                int value;\\n            };\\n\\n            struct Outer\\n            {\\n                struct Inner inner;\\n                string name;\\n  ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.forma...,\n    line_num=13\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>]\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FA39A90>]\n  global_def = StructDefinition(\n    identifier=Identifier(\n        label=\'Outer\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991D5F5590>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991F72CCD0>]\n)\n  entry_index = 1\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.forma...,\n    line_num=13\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableDeclarator object at 0x000001991F2FAB70>],\n    is_const=False\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableDeclarator object at 0x000001991F2FAB70>],\n    is_const=False\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'outer\'\n    )\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2336:\n  self = VariableDeclarator(\n    identifier=Identifier(\n        label=\'outer\'\n    )\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  data_type = DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer)\n  is_const = False\n  struct_name = \'Outer\'\n\nFunction \'initialize\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:266:\n  self = Struct(\n    identifier=Identifier(\n        label=\'Outer\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991D5F5590>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991F72CCD0>],\n    _cached_size=None\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  member = StructMember(\n    datatype=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Inner),\n    identifier=Identifier(\n        label=\'inner\'\n    )\n)\n\nFunction \'initialize\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:317:\n  self = StructMember(\n    datatype=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Inner),\n    identifier=Identifier(\n        label=\'inner\'\n    )\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3921, in test_nested_struct_access\n    ncs = self.compile(\n        """\n    ...<19 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2336, in compile\n    root.struct_map[struct_name].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 266, in initialize\n    member.initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 317, in initialize\n    root.struct_map[self.identifier.label].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nKeyError: \'inner\'\n' [ 59%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_nop_statement FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3712, in test_nop_statement\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 102, in compile\n    t = parser.parse(script, tracking=True)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 331, in parse\n    return self.parseopt(input, lexer, debug, tracking, tokenfunc)\n           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 909, in parseopt\n    tok = call_errorfunc(self.errorfunc, errtoken, self)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 192, in call_errorfunc\n    r = errorfunc(token)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py", line 133, in p_error\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\n\nCompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_nop_statement>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  result = <TestCaseFunction test_nop_statement>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_nop_statement of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82839.601422\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  method = <bound method TestNCSCompiler.test_nop_statement of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>>\n\nFunction \'test_nop_statement\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3712:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:102:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  script = \'\\n            void main()\\n            {\\n                NOP "test message";\\n                PrintInteger(42);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n\nFunction \'parse\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:331:\n  self = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n  lexer = None\n  debug = False\n  tracking = True\n  tokenfunc = None\n\nFunction \'parseopt\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:909:\n  self = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n  lexer = Lexer(\n    lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSELF_VALUE>OBJECT_SELF\\...,\n    lexretext=[\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSELF_VALUE>OBJECT_SELF\\\\b)|(?P<...,\n    lexstatere={\'INITIAL\': [(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMME...<truncated>\n  debug = False\n  tracking = True\n  tokenfunc = None\n  lookahead = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  lookaheadstack = []\n  actions = {0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE\': -2, ...\n  goto = {0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initialization\': 7...\n  prod = [Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_root_object ->...\n  defaulted_states = {10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131}\n  pslice = YaccProduction(\n    slice=[function_definition_params],\n    stack=[$end, code_root, data_type, LexToken(IDENTIFIER,<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991FB6E670>,2,18), LexToken((,\'(\',2,22), function_definition_params, ...,\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...,\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...\n)\n  errorcount = 3\n  lex = <module \'ply.lex\' from \'C:\\\\Users\\\\boden\\\\AppData\\\\Roaming\\\\Python\\\\Python313\\\\site-packages\\\\ply\\\\lex.py\'>\n  get_token = <bound method Lexer.token of <ply.lex.Lexer object at 0x000001991FAF4180>>\n  statestack = [0, 1, 9, 26, 31, 38, 65, 118, 164]\n  symstack = [$end, code_root, data_type, LexToken(IDENTIFIER,<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991FB6E670>,2,18), LexToken((,\'(\',2,22), function_definition_params, LexTok...\n  errtoken = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  sym = function_definition_params\n  state = 164\n  ltype = \'STRING_VALUE\'\n  t = None\n  p = Production(function_definition_params -> <empty>)\n  pname = \'function_definition_params\'\n  plen = 0\n  targ = [function_definition_params]\n  t1 = LexToken(VOID_TYPE,<DataType.VOID: \'void\'>,2,13)\n\nFunction \'call_errorfunc\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:192:\n  errorfunc = <bound method NssParser.p_error of <pykotor.resource.formats.ncs.compiler.parser.NssParser object at 0x000001991F3B0830>>\n  token = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n\nFunction \'p_error\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py:133:\n  self = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  p = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  msg = "Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3712, in test_nop_statement\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 102, in compile\n    t = parser.parse(script, tracking=True)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 331, in parse\n    return self.parseopt(input, lexer, debug, tracking, tokenfunc)\n           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 909, in parseopt\n    tok = call_errorfunc(self.errorfunc, errtoken, self)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 192, in call_errorfunc\n    r = errorfunc(token)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py", line 133, in p_error\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\n' [ 60%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_not_op FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 529, in test_not_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_not_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  result = <TestCaseFunction test_not_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_not_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82840.6130561\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  method = <bound method TestNCSCompiler.test_not_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>>\n\nFunction \'test_not_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:529:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 529, in test_not_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 60%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_op_with_variables FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 508, in test_op_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_op_with_variables>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  result = <TestCaseFunction test_op_with_variables>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_op_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82841.5585507\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  method = <bound method TestNCSCompiler.test_op_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>>\n\nFunction \'test_op_with_variables\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:508:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 508, in test_op_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 61%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_decrement_bp_int PASSED [ 61%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_decrement_sp_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2989, in test_postfix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_postfix_decrement_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  result = <TestCaseFunction test_postfix_decrement_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_postfix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82844.1666498\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  method = <bound method TestNCSCompiler.test_postfix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>>\n\nFunction \'test_postfix_decrement_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2989:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2989, in test_postfix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 62%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_increment_bp_int PASSED [ 62%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_increment_sp_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2903, in test_postfix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_postfix_increment_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  result = <TestCaseFunction test_postfix_increment_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_postfix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82847.2746827\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  method = <bound method TestNCSCompiler.test_postfix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>>\n\nFunction \'test_postfix_increment_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2903:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2903, in test_postfix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 63%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_decrement_bp_int PASSED [ 63%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_decrement_sp_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2946, in test_prefix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prefix_decrement_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  result = <TestCaseFunction test_prefix_decrement_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prefix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82848.8526891\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  method = <bound method TestNCSCompiler.test_prefix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>>\n\nFunction \'test_prefix_decrement_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2946:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2946, in test_prefix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 64%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_increment_bp_int PASSED [ 64%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_increment_sp_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2860, in test_prefix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prefix_increment_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  result = <TestCaseFunction test_prefix_increment_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prefix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82850.6498942\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  method = <bound method TestNCSCompiler.test_prefix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>>\n\nFunction \'test_prefix_increment_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2860:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2860, in test_prefix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 65%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_after_definition PASSED [ 65%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_and_definition_default_param_mismatch PASSED [ 66%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_and_definition_param_mismatch PASSED [ 67%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_and_definition_return_mismatch PASSED [ 67%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_default_before_required FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3223, in test_prototype_default_before_required\n    self.assertRaises(CompileError, self.compile, source)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 795, in assertRaises\n    return context.handle(\'assertRaises\', args, kwargs)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 238, in handle\n    callable_obj(*args, **kwargs)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_default_before_required>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  result = <TestCaseFunction test_prototype_default_before_required>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_default_before_required of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82853.6119555\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  method = <bound method TestNCSCompiler.test_prototype_default_before_required of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n\nFunction \'test_prototype_default_before_required\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3223:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  source = \'\\n            void test(int value1 = 123, int value2);\\n\\n            void main()\\n            {\\n                test(123, 123);\\n            }\\n\\n            void test(int value1 = 123, int value2)...\n\nFunction \'assertRaises\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:795:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  expected_exception = <class \'pykotor.resource.formats.ncs.compiler.classes.CompileError\'>\n  args = (<bound method CompilerTestBase.compile of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>, \'\\n            void test(int value1 = 123,...\n  kwargs = {}\n  context = None\n\nFunction \'handle\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:238:\n  self = None\n  name = \'assertRaises\'\n  args = [\'\\n            void test(int value1 = 123, int value2);\\n\\n            void main()\\n            {\\n                test(123, 123);\\n            }\\n\\n            void test(int value1 = 123, int value2...\n  kwargs = {}\n  callable_obj = <bound method CompilerTestBase.compile of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3223, in test_prototype_default_before_required\n    self.assertRaises(CompileError, self.compile, source)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 795, in assertRaises\n    return context.handle(\'assertRaises\', args, kwargs)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 238, in handle\n    callable_obj(*args, **kwargs)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 68%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_missing_arg PASSED [ 68%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_missing_arg_and_default PASSED [ 69%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_no_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3021, in test_prototype_no_args\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 742, in compile\n    self._compile_function(root, name, ncs)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 784, in _compile_function\n    self.block.compile(temp, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  result = <TestCaseFunction test_prototype_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82855.2979355\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  method = <bound method TestNCSCompiler.test_prototype_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>>\n\nFunction \'test_prototype_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3021:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  script = \'\\n            void test();\\n\\n            void main()\\n            {\\n                test();\\n            }\\n\\n            void test()\\n            {\\n                PrintInteger(56);\\n            ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920F012B0...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:742:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  previous_is_default = False\n\nFunction \'_compile_function\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:784:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  temp = NCS(#0: CONSTI(56); #1: ACTION(4, 1); #2: MOVSP(0); ... (1 more))\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: CONSTI(56); #1: ACTION(4, 1); #2: MOVSP(0); ... (1 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3021, in test_prototype_no_args\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 742, in compile\n    self._compile_function(root, name, ncs)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 784, in _compile_function\n    self.block.compile(temp, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 69%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_arg FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3045, in test_prototype_with_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  result = <TestCaseFunction test_prototype_with_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82855.8093785\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  method = <bound method TestNCSCompiler.test_prototype_with_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>>\n\nFunction \'test_prototype_with_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3045:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  script = \'\\n            void test(int value);\\n\\n            void main()\\n            {\\n                test(57);\\n            }\\n\\n            void test(int value)\\n            {\\n                PrintIntege...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A2A50...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=57)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3045, in test_prototype_with_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 70%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_default_arg FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3125, in test_prototype_with_default_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_default_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  result = <TestCaseFunction test_prototype_with_default_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_default_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82856.30266\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  method = <bound method TestNCSCompiler.test_prototype_with_default_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>>\n\nFunction \'test_prototype_with_default_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3125:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  script = \'\\n            void test(int value = 57);\\n\\n            void main()\\n            {\\n                test();\\n            }\\n\\n            void test(int value = 57)\\n            {\\n                Pri...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920F03A10...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3125, in test_prototype_with_default_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 70%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_default_constant_arg PASSED [ 71%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_many_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3095, in test_prototype_with_many_args\n    ncs = self.compile(\n        """\n    ...<15 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_many_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  result = <TestCaseFunction test_prototype_with_many_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_many_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82858.1589674\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  method = <bound method TestNCSCompiler.test_prototype_with_many_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>>\n\nFunction \'test_prototype_with_many_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3095:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  script = \'\\n            void test(int a, effect z, int b, int c, int d = 4)\\n            {\\n                PrintInteger(a);\\n                PrintInteger(b);\\n                PrintInteger(c);\\n               ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=10\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=10\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FD7F0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F9A1E80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IdentifierExpression(identifier=a), IdentifierExpression(identifier=z), IdentifierEx...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3095, in test_prototype_with_many_args\n    ncs = self.compile(\n        """\n    ...<15 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 71%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_three_args FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3087, in test_prototype_with_three_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_three_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  result = <TestCaseFunction test_prototype_with_three_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_three_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82859.2152016\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  method = <bound method TestNCSCompiler.test_prototype_with_three_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>>\n\nFunction \'test_prototype_with_three_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3087:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 17\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3087, in test_prototype_with_three_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 72%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_redefine_function PASSED [ 72%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3463, in test_return\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  result = <TestCaseFunction test_return>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82861.5908215\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  method = <bound method TestNCSCompiler.test_return of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>>\n\nFunction \'test_return\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3463:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3463, in test_return\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 73%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return_parenthesis FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3486, in test_return_parenthesis\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return_parenthesis>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  result = <TestCaseFunction test_return_parenthesis>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return_parenthesis of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82862.642377\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  method = <bound method TestNCSCompiler.test_return_parenthesis of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>>\n\nFunction \'test_return_parenthesis\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3486:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=321],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=321],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3486, in test_return_parenthesis\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 74%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return_parenthesis_constant FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3508, in test_return_parenthesis_constant\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return_parenthesis_constant>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  result = <TestCaseFunction test_return_parenthesis_constant>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return_parenthesis_constant of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82863.9208817\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  method = <bound method TestNCSCompiler.test_return_parenthesis_constant of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>>\n\nFunction \'test_return_parenthesis_constant\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3508:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3508, in test_return_parenthesis_constant\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 74%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_scope FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2337, in test_scope\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  result = <TestCaseFunction test_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82867.3832714\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  method = <bound method TestNCSCompiler.test_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>>\n\nFunction \'test_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2337:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  script = \'\\n            void main()\\n            {\\n                int value = 1;\\n\\n                if (value == 1)\\n                {\\n                    value = 2;\\n                }\\n            }\\n     ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019920DEA040>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F19...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920E2ACD0>],\n    else_block=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2337, in test_scope\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 75%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_scoped_block FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2372, in test_scoped_block\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_scoped_block>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  result = <TestCaseFunction test_scoped_block>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_scoped_block of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82869.5542921\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  method = <bound method TestNCSCompiler.test_scoped_block of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>>\n\nFunction \'test_scoped_block\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2372:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2372, in test_scoped_block\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 75%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_single_statement_else_if_else FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1817, in test_single_statement_else_if_else\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_single_statement_else_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  result = <TestCaseFunction test_single_statement_else_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_single_statement_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82870.5834716\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  method = <bound method TestNCSCompiler.test_single_statement_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>>\n\nFunction \'test_single_statement_else_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1817:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0) PrintInteger(11);\\n                else if (0) PrintInteger(22);\\n                else PrintInteger(33);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F3DAED0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F3DA450>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F3DAED0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F3DA450>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921267EF0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1817, in test_single_statement_else_if_else\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 76%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_single_statement_if FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1801, in test_single_statement_if\n    ncs = self.compile(\n        """\n    ...<4 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_single_statement_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  result = <TestCaseFunction test_single_statement_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_single_statement_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82871.8210128\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  method = <bound method TestNCSCompiler.test_single_statement_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>>\n\nFunction \'test_single_statement_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1801:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  script = \'\\n            void main()\\n            {\\n                if (1) PrintInteger(222);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920DE9550>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920DE9550>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=1),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F2FD2B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1801, in test_single_statement_if\n    ncs = self.compile(\n        """\n    ...<4 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 76%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_struct_get_invalid_member PASSED [ 77%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_struct_get_members FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2765, in test_struct_get_members\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_struct_get_members>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  result = <TestCaseFunction test_struct_get_members>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_struct_get_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82874.1765488\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  method = <bound method TestNCSCompiler.test_struct_get_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>>\n\nFunction \'test_struct_get_members\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2765:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  script = \'\\n            struct ABC\\n            {\\n                int value1;\\n                string value2;\\n                float value3;\\n            };\\n\\n            void main()\\n            {\\n        ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=9\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>]\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>]\n  global_def = StructDefinition(\n    identifier=Identifier(\n        label=\'ABC\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x0000019920DEE470>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x0000019920DEE360>, <pykotor....\n)\n  entry_index = 1\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=9\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991FB79FD0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2765, in test_struct_get_members\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 77%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_struct_set_members FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2835, in test_struct_set_members\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1105, in copy_to_top\n    raise ValueError(msg)\nValueError: Offset must be a non-zero multiple of 4, got 0\n\nValueError: Offset must be a non-zero multiple of 4, got 0\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_struct_set_members>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  result = <TestCaseFunction test_struct_set_members>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_struct_set_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82877.1136613\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  method = <bound method TestNCSCompiler.test_struct_set_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>>\n\nFunction \'test_struct_set_members\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2835:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  ncs = NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:134:\n  self = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None)\n  index = 22\n  jump_value = None\n\nFunction \'copy_to_top\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1105:\n  self = Stack(\n    _stack=[INT=123],\n    _bp=0,\n    _bp_buffer=[0],\n    _global_bp=0\n)\n  offset = 0\n  size = 4\n  msg = \'Offset must be a non-zero multiple of 4, got 0\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2835, in test_struct_set_members\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1105, in copy_to_top\n    raise ValueError(msg)\nValueError: Offset must be a non-zero multiple of 4, got 0\n' [ 78%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subop_float_float PASSED [ 78%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subop_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 341, in test_subop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  result = <TestCaseFunction test_subop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82884.4076568\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  method = <bound method TestNCSCompiler.test_subop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>>\n\nFunction \'test_subop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:341:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 341, in test_subop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' [ 79%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_float_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1035, in test_subtraction_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_float_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  result = <TestCaseFunction test_subtraction_assignment_float_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82886.4058885\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>>\n\nFunction \'test_subtraction_assignment_float_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1035:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  script = \'\\n            void main()\\n            {\\n                float value = 10.0;\\n                value -= 2.0;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199211F1D30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1035, in test_subtraction_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 80%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_float_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1056, in test_subtraction_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_float_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  result = <TestCaseFunction test_subtraction_assignment_float_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82887.4402891\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>>\n\nFunction \'test_subtraction_assignment_float_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1056:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  script = \'\\n            void main()\\n            {\\n                float value = 10.0;\\n                value -= 2;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199211F3E00>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1056, in test_subtraction_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' [ 80%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_int_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1027, in test_subtraction_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_int_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  result = <TestCaseFunction test_subtraction_assignment_int_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82888.2779762\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>>\n\nFunction \'test_subtraction_assignment_int_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1027:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1027, in test_subtraction_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 81%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_int_int FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 993, in test_subtraction_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  result = <TestCaseFunction test_subtraction_assignment_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82889.7224102\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>>\n\nFunction \'test_subtraction_assignment_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:993:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  script = \'\\n            void main()\\n            {\\n                int value = 10;\\n                value -= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921282DD0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 993, in test_subtraction_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 81%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_jump_over PASSED [ 82%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_no_breaks PASSED [ 82%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scope_a FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2276, in test_switch_scope_a\n    ncs = self.compile(\n        """\n    ...<27 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scope_a>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  result = <TestCaseFunction test_switch_scope_a>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scope_a of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82892.8371132\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  method = <bound method TestNCSCompiler.test_switch_scope_a of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>>\n\nFunction \'test_switch_scope_a\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2276:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  script = \'\\n            int shape;\\n            int harmful;\\n\\n            void main()\\n            {\\n                object oTarget = OBJECT_SELF;\\n                effect e1, e2;\\n                effect e3;...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x0000019921...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921522820>]\n  global_def = GlobalVariableDeclaration(\n    identifier=Identifier(\n        label=\'harmful\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    is_const=False\n)\n  entry_index = 3\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB4D0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921522C80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=True,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = SwitchStatement(\n    line_num=None,\n    expression=IntExpression(value=1),\n    blocks=[<pykotor.resource.formats.ncs.compiler.classes.SwitchBlock object at 0x0000019921635370>],\n    real_block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.format...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2276, in test_switch_scope_a\n    ncs = self.compile(\n        """\n    ...<27 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 83%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scope_b FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2330, in test_switch_scope_b\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scope_b>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  result = <TestCaseFunction test_switch_scope_b>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scope_b of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82894.0593555\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  method = <bound method TestNCSCompiler.test_switch_scope_b of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>>\n\nFunction \'test_switch_scope_b\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2330:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 12\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2500],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2500],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2330, in test_switch_scope_b\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 83%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scoped_blocks FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2272, in test_switch_scoped_blocks\n    assert interpreter.action_snapshots[-1].arg_values[0] == 20\nAssertionError: assert INT=0 == 20\n\nAssertionError: assert INT=0 == 20\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scoped_blocks>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  result = <TestCaseFunction test_switch_scoped_blocks>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scoped_blocks of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82895.3244929\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  method = <bound method TestNCSCompiler.test_switch_scoped_blocks of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>>\n\nFunction \'test_switch_scoped_blocks\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2272:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196496896: 0, 1757196500704: 1, 1757200653168: 2, 1757200652832: 3, 1757196496224: 4, 1757196498688: 5, 1757196498800: 6, 1757196487712: 7, 1757196497456: 8, 1...<truncated>\n  @py_assert2 = False\n  @py_assert4 = None\n  @py_assert7 = None\n  @py_assert6 = None\n  @py_assert0 = INT=0\n  @py_assert3 = 20\n  @py_format5 = \'INT=0 == 20\'\n  @py_format7 = \'assert INT=0 == 20\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2272, in test_switch_scoped_blocks\n    assert interpreter.action_snapshots[-1].arg_values[0] == 20\nAssertionError: assert INT=0 == 20\n' [ 84%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_with_breaks PASSED [ 84%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_with_default PASSED [ 85%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_assignment FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1647, in test_ternary_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  result = <TestCaseFunction test_ternary_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82897.8256288\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  method = <bound method TestNCSCompiler.test_ternary_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>>\n\nFunction \'test_ternary_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1647:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1647, in test_ternary_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 85%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_basic FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1489, in test_ternary_basic\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_basic>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  result = <TestCaseFunction test_ternary_basic>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_basic of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82898.5858469\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  method = <bound method TestNCSCompiler.test_ternary_basic of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>>\n\nFunction \'test_ternary_basic\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1489:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=100],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=100],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1489, in test_ternary_basic\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 86%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_false_branch FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1506, in test_ternary_false_branch\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_false_branch>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  result = <TestCaseFunction test_ternary_false_branch>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_false_branch of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82899.5658417\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  method = <bound method TestNCSCompiler.test_ternary_false_branch of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>>\n\nFunction \'test_ternary_false_branch\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1506:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=200],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=200],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1506, in test_ternary_false_branch\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 87%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_float_branches FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1578, in test_ternary_float_branches\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_float_branches>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  result = <TestCaseFunction test_ternary_float_branches>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_float_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82900.3621051\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  method = <bound method TestNCSCompiler.test_ternary_float_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>>\n\nFunction \'test_ternary_float_branches\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1578:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  script = \'\\n            void main()\\n            {\\n                float result = 1 ? 3.14f : 2.71f;\\n                PrintFloat(result);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991FB7AB30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1578, in test_ternary_float_branches\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 87%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_in_expression FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1561, in test_ternary_in_expression\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_in_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  result = <TestCaseFunction test_ternary_in_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_in_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82900.8746677\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  method = <bound method TestNCSCompiler.test_ternary_in_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>>\n\nFunction \'test_ternary_in_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1561:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1561, in test_ternary_in_expression\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 88%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_nested FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1543, in test_ternary_nested\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_nested>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  result = <TestCaseFunction test_ternary_nested>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_nested of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82901.5045743\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  method = <bound method TestNCSCompiler.test_ternary_nested of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>>\n\nFunction \'test_ternary_nested\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1543:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1543, in test_ternary_nested\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 88%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_precedence FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1664, in test_ternary_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_precedence>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  result = <TestCaseFunction test_ternary_precedence>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82902.6899289\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  method = <bound method TestNCSCompiler.test_ternary_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>>\n\nFunction \'test_ternary_precedence\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1664:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 17\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1664, in test_ternary_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 89%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_string_branches FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1606, in test_ternary_string_branches\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_string_branches>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  result = <TestCaseFunction test_ternary_string_branches>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_string_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82903.5459976\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  method = <bound method TestNCSCompiler.test_ternary_string_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>>\n\nFunction \'test_ternary_string_branches\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 11\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[STRING=, STRING=yes],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[STRING=, STRING=yes],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = STRING=\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1606, in test_ternary_string_branches\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 89%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_type_mismatch_error PASSED [ 90%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_with_function_calls FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1628, in test_ternary_with_function_calls\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_with_function_calls>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  result = <TestCaseFunction test_ternary_with_function_calls>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_with_function_calls of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82904.8601094\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  method = <bound method TestNCSCompiler.test_ternary_with_function_calls of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>>\n\nFunction \'test_ternary_with_function_calls\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1628:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 24\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1628, in test_ternary_with_function_calls\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 90%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_with_variables FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1524, in test_ternary_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_with_variables>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  result = <TestCaseFunction test_ternary_with_variables>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82905.8381057\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  method = <bound method TestNCSCompiler.test_ternary_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>>\n\nFunction \'test_ternary_with_variables\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1524:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1524, in test_ternary_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 91%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2677, in test_vector\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  result = <TestCaseFunction test_vector>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82906.965672\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  method = <bound method TestNCSCompiler.test_vector of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>>\n\nFunction \'test_vector\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2677:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(2.0, 4.0, 4.0);\\n                float mag = VectorMagnitude(vec);\\n                PrintFloat(mag);\\n            }\\n    ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4CB0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921606C80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2677, in test_vector\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [ 91%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_addition FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3732, in test_vector_addition\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_addition>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  result = <TestCaseFunction test_vector_addition>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82908.1480133\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  method = <bound method TestNCSCompiler.test_vector_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>>\n\nFunction \'test_vector_addition\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3732:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(1.0, 2.0, 3.0);\\n                vector v2 = Vector(4.0, 5.0, 6.0);\\n                vector result = v1 + v2;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8650>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199215219B0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3732, in test_vector_addition\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 92%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_addition FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3826, in test_vector_compound_assignment_addition\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2270, in compile\n    expression_type = self.expression.compile(ncs, root, block)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1632, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\n\nCompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_addition>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  result = <TestCaseFunction test_vector_compound_assignment_addition>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82909.3206635\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>>\n\nFunction \'test_vector_compound_assignment_addition\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3826:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(1.0, 2.0, 3.0);\\n                v += Vector(0.5, 0.5, 0.5);\\n                PrintFloat(v.x);\\n                PrintFloat(...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n        ),\n        ex...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2270:\n  self = ExpressionStatement(\n    line_num=None,\n    expression=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n        ),\n        ex...\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1632:\n  self = AdditionAssignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n    ),\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VECTOR: \'vector\'>, \'Vector\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'x\', \'0.0\'), ScriptParam(<DataType.FLOAT: \'float\'>, \'y\'...\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  is_global = False\n  variable_type = DynamicDataType(builtin=DataType.VECTOR(vector), struct=None)\n  stack_index = -12\n  is_const = False\n  var_name = \'v\'\n  msg = "Type mismatch in += operation on \'v\'\\n  Variable type: VECTOR\\n  Expression type: VECTOR\\n  Supported: int+=int, float+=float/int, string+=string"\n  instruction_type = <NCSInstructionType.CPTOPSP: NCSInstructionTypeValue(byte_code=<NCSByteCode.CPTOPSP: 3>, qualifier=1)>\n  expresion_type = DynamicDataType(builtin=DataType.VECTOR(vector), struct=None)\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3826, in test_vector_compound_assignment_addition\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2270, in compile\n    expression_type = self.expression.compile(ncs, root, block)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1632, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\n' [ 92%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_division FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3895, in test_vector_compound_assignment_division\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_division>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  result = <TestCaseFunction test_vector_compound_assignment_division>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_division of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82910.6527889\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_division of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>>\n\nFunction \'test_vector_compound_assignment_division\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3895:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(8.0, 6.0, 4.0);\\n                v /= 2.0;\\n                PrintFloat(v.x);\\n                PrintFloat(v.y);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992127F3F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3895, in test_vector_compound_assignment_division\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 93%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_multiplication FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3872, in test_vector_compound_assignment_multiplication\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_multiplication>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  result = <TestCaseFunction test_vector_compound_assignment_multiplication>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_multiplication of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>...\n  expecting_failure = False\n  outcome = None\n  start_time = 82911.400698\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_multiplication of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>...\n\nFunction \'test_vector_compound_assignment_multiplication\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3872:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(2.0, 3.0, 4.0);\\n                v *= 2.0;\\n                PrintFloat(v.x);\\n                PrintFloat(v.y);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688E50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3872, in test_vector_compound_assignment_multiplication\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 94%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_subtraction FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3849, in test_vector_compound_assignment_subtraction\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_subtraction>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  result = <TestCaseFunction test_vector_compound_assignment_subtraction>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82912.6929848\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>>\n\nFunction \'test_vector_compound_assignment_subtraction\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3849:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(5.0, 5.0, 5.0);\\n                v -= Vector(1.0, 2.0, 3.0);\\n                PrintFloat(v.x);\\n                PrintFloat(...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992142C050>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3849, in test_vector_compound_assignment_subtraction\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 94%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_division_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3803, in test_vector_division_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_division_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  result = <TestCaseFunction test_vector_division_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_division_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82913.4552877\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  method = <bound method TestNCSCompiler.test_vector_division_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>>\n\nFunction \'test_vector_division_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3803:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(8.0, 6.0, 4.0);\\n                vector result = v1 / 2.0;\\n                PrintFloat(result.x);\\n                PrintFl...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB49B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199215B7E00>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3803, in test_vector_division_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 95%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_get_components FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2718, in test_vector_get_components\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_get_components>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  result = <TestCaseFunction test_vector_get_components>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_get_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82914.3540189\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  method = <bound method TestNCSCompiler.test_vector_get_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>>\n\nFunction \'test_vector_get_components\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2718:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(2.0, 4.0, 6.0);\\n                PrintFloat(vec.x);\\n                PrintFloat(vec.y);\\n                PrintFloat(vec.z...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992191DEF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2718, in test_vector_get_components\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 95%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_multiplication_float FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3780, in test_vector_multiplication_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_multiplication_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  result = <TestCaseFunction test_vector_multiplication_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_multiplication_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82915.6854727\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  method = <bound method TestNCSCompiler.test_vector_multiplication_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>>\n\nFunction \'test_vector_multiplication_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3780:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(2.0, 3.0, 4.0);\\n                vector result = v1 * 2.0;\\n                PrintFloat(result.x);\\n                PrintFl...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992191FAF0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3780, in test_vector_multiplication_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 96%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_notation FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2697, in test_vector_notation\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_notation>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  result = <TestCaseFunction test_vector_notation>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_notation of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82916.5337143\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  method = <bound method TestNCSCompiler.test_vector_notation of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>>\n\nFunction \'test_vector_notation\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2697:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  script = \'\\n            void main()\\n            {\\n                vector vec = [1.0, 2.0, 3.0];\\n                PrintFloat(vec.x);\\n                PrintFloat(vec.y);\\n                PrintFloat(vec.z);\\n  ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991C295470>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2697, in test_vector_notation\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 96%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_set_components FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2740, in test_vector_set_components\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_set_components>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  result = <TestCaseFunction test_vector_set_components>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_set_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82917.3250846\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  method = <bound method TestNCSCompiler.test_vector_set_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>>\n\nFunction \'test_vector_set_components\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2740:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(0.0, 0.0, 0.0);\\n                vec.x = 2.0;\\n                vec.y = 4.0;\\n                vec.z = 6.0;\\n              ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6C8E50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2740, in test_vector_set_components\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' [ 97%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_subtraction FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3756, in test_vector_subtraction\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_subtraction>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  result = <TestCaseFunction test_vector_subtraction>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82918.7740105\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  method = <bound method TestNCSCompiler.test_vector_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>>\n\nFunction \'test_vector_subtraction\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3756:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(5.0, 7.0, 9.0);\\n                vector v2 = Vector(1.0, 2.0, 3.0);\\n                vector result = v1 - v2;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07B90>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB01D30>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3756, in test_vector_subtraction\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' [ 97%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1835, in test_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  result = <TestCaseFunction test_while_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82919.9173364\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  method = <bound method TestNCSCompiler.test_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>>\n\nFunction \'test_while_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1835:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921AAFD10>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=SubtractionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991D700BE0>]\n        ),\n       ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1835, in test_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 98%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_scope FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1929, in test_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  result = <TestCaseFunction test_while_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82921.406582\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  method = <bound method TestNCSCompiler.test_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>>\n\nFunction \'test_while_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1929:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1929, in test_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' [ 98%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_with_break FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1859, in test_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  result = <TestCaseFunction test_while_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82922.7259452\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  method = <bound method TestNCSCompiler.test_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>>\n\nFunction \'test_while_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1859:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DBB9670>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = BreakStatement(\n    line_num=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1859, in test_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' [ 99%]
tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_with_continue FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1882, in test_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  result = <TestCaseFunction test_while_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82924.0056454\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>>\n\nFunction \'test_while_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1882:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D580EF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1882, in test_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' [100%]

============================== warnings summary ===============================
C:\Users\boden\AppData\Roaming\Python\Python313\site-packages\_pytest\config\__init__.py:1397
  C:\Users\boden\AppData\Roaming\Python\Python313\site-packages\_pytest\config\__init__.py:1397: PytestConfigWarning: Unknown config option: xvfb_height
  
    self._warn_or_fail_if_strict(f"Unknown config option: {key}\n")

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 932, in test_addition_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_float_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  result = <TestCaseFunction test_addition_assignment_float_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82729.3892805\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  method = <bound method TestNCSCompiler.test_addition_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>>\n\nFunction \'test_addition_assignment_float_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:932:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_float>\n  script = \'\\n            void main()\\n            {\\n                float value = 1.0;\\n                value += 2.0;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D562660>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D561940>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D562270>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 932, in test_addition_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_float_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 951, in test_addition_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_float_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  result = <TestCaseFunction test_addition_assignment_float_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82729.8636544\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  method = <bound method TestNCSCompiler.test_addition_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>>\n\nFunction \'test_addition_assignment_float_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:951:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_float_int>\n  script = \'\\n            void main()\\n            {\\n                float value = 1.0;\\n                value += 2;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DCA6850>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DCA74D0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(1.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DCA6AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 951, in test_addition_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_float_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 924, in test_addition_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_int_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  result = <TestCaseFunction test_addition_assignment_int_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82730.1659957\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  method = <bound method TestNCSCompiler.test_addition_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>>\n\nFunction \'test_addition_assignment_int_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:924:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_float>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757113593184: 0, 1757113589600: 1, 1757113594304: 2, 1757113589488: 3, 1757113593632: 4, 1757113587360: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 924, in test_addition_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_int_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 890, in test_addition_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addition_assignment_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  result = <TestCaseFunction test_addition_assignment_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addition_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82730.4791801\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  method = <bound method TestNCSCompiler.test_addition_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>>\n\nFunction \'test_addition_assignment_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:890:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addition_assignment_int_int>\n  script = \'\\n            void main()\\n            {\\n                int value = 1;\\n                value += 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6D68B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6D5BA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6D6650>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 890, in test_addition_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addition_assignment_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 293, in test_addop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_addop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  result = <TestCaseFunction test_addop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_addop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82731.3460715\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  method = <bound method TestNCSCompiler.test_addop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>>\n\nFunction \'test_addop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:293:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_addop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139441200: 0, 1757139440976: 1, 1757136221504: 2, 1757136219152: 3, 1757136218592: 4, 1757136218928: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=15],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=15],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 293, in test_addop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_addop_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 825, in test_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  result = <TestCaseFunction test_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82731.9546895\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  method = <bound method TestNCSCompiler.test_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>>\n\nFunction \'test_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:825:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (13 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139450496: 0, 1757139449488: 1, 1757139436160: 2, 1757139436832: 3, 1757139441984: 4, 1757139438176: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 825, in test_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 832, in test_assignment_complex\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignment_complex>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  result = <TestCaseFunction test_assignment_complex>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignment_complex of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82732.2443125\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  method = <bound method TestNCSCompiler.test_assignment_complex of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>>\n\nFunction \'test_assignment_complex\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:832:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignment_complex>\n  script = \'\\n            void main()\\n            {\\n                int a = 1;\\n                a = a * 2 + 8;\\n\\n                PrintInteger(a);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D698B50>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D69A150>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D699A50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 832, in test_assignment_complex\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignment_complex
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3690, in test_assignmentless_expression\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_assignmentless_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  result = <TestCaseFunction test_assignmentless_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_assignmentless_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.1415434\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  method = <bound method TestNCSCompiler.test_assignmentless_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>>\n\nFunction \'test_assignmentless_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3690:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_assignmentless_expression>\n  script = \'\\n            void main()\\n            {\\n                int a = 123;\\n\\n                1;\\n                GetCheatCode(1);\\n                "abc";\\n\\n                PrintInteger(a);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D5DCF30>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991C246CF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(123); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991C245710>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3690, in test_assignmentless_expression\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_assignmentless_expression
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 488, in test_bidmas\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -56 is out of range\n\nValueError: Stack offset -56 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bidmas>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  result = <TestCaseFunction test_bidmas>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bidmas of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.5307057\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  method = <bound method TestNCSCompiler.test_bidmas of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>>\n\nFunction \'test_bidmas\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:488:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bidmas>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None),\n    _cursor_index=27,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139437952: 0, 1757139438512: 1, 1757143667152: 2, 1757143667040: 3, 1757143663904: 4, 1757143667376: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-56, 4], jump=None)\n  index = 27\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=17],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -56\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -56\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=17],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -56\n  msg = \'Stack offset -56 is out of range\'\n  remaining = 48\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 488, in test_bidmas\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -56 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bidmas
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1117, in test_bitwise_and_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_and_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  result = <TestCaseFunction test_bitwise_and_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_and_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82733.8392123\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_and_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>>\n\nFunction \'test_bitwise_and_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1117:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value &= 0x0F;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D6AD570>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6AF040>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6AED00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1117, in test_bitwise_and_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_and_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 771, in test_bitwise_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_and_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  result = <TestCaseFunction test_bitwise_and_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82734.224849\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  method = <bound method TestNCSCompiler.test_bitwise_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>>\n\nFunction \'test_bitwise_and_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:771:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_and_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135595440: 0, 1757135587824: 1, 1757135595664: 2, 1757135595776: 3, 1757135589392: 4, 1757135589280: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 771, in test_bitwise_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_and_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1244, in test_bitwise_assignment_with_expression\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_assignment_with_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  result = <TestCaseFunction test_bitwise_assignment_with_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_assignment_with_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82734.5886235\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  method = <bound method TestNCSCompiler.test_bitwise_assignment_with_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>>\n\nFunction \'test_bitwise_assignment_with_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1244:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_assignment_with_expression>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value &= 0x0F | 0x10;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E13B1D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E138290>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E13B350>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1244, in test_bitwise_assignment_with_expression\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_assignment_with_expression
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1180, in test_bitwise_left_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_left_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  result = <TestCaseFunction test_bitwise_left_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_left_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.0358668\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_left_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>>\n\nFunction \'test_bitwise_left_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1180:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_left_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 7;\\n                value <<= 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDFF3E0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DDFF120>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(7); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DDFF280>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1180, in test_bitwise_left_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_left_shift_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 755, in test_bitwise_not_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_not_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  result = <TestCaseFunction test_bitwise_not_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_not_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.446372\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  method = <bound method TestNCSCompiler.test_bitwise_not_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>>\n\nFunction \'test_bitwise_not_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:755:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_not_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (7 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143676896: 0, 1757143674656: 1, 1757136220160: 2, 1757143671184: 3, 1757143677904: 4, 1757143672864: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=-2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=-2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 755, in test_bitwise_not_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_not_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1138, in test_bitwise_or_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_or_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  result = <TestCaseFunction test_bitwise_or_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_or_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82735.7572838\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_or_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>>\n\nFunction \'test_bitwise_or_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1138:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0x0F;\\n                value |= 0xF0;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E0F5130>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E0F54F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(15); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E0F51D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1138, in test_bitwise_or_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_or_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 723, in test_bitwise_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_or_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  result = <TestCaseFunction test_bitwise_or_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.071026\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  method = <bound method TestNCSCompiler.test_bitwise_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>>\n\nFunction \'test_bitwise_or_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:723:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_or_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143420944: 0, 1757143420832: 1, 1757143678800: 2, 1757143675104: 3, 1757143419824: 4, 1757143420272: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=7],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=7],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 723, in test_bitwise_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_or_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1201, in test_bitwise_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_right_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  result = <TestCaseFunction test_bitwise_right_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.3898339\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>>\n\nFunction \'test_bitwise_right_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1201:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_right_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 28;\\n                value >>= 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBBEB10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBBE210>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(28); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBBFEC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1201, in test_bitwise_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_right_shift_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 787, in test_bitwise_shiftleft_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_shiftleft_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  result = <TestCaseFunction test_bitwise_shiftleft_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_shiftleft_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82736.8920613\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  method = <bound method TestNCSCompiler.test_bitwise_shiftleft_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>>\n\nFunction \'test_bitwise_shiftleft_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:787:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftleft_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143664352: 0, 1757143670288: 1, 1757143671072: 2, 1757143672528: 3, 1757143666368: 4, 1757143666480: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=28],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=28],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 787, in test_bitwise_shiftleft_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_shiftleft_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 803, in test_bitwise_shiftright_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_shiftright_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  result = <TestCaseFunction test_bitwise_shiftright_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_shiftright_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82737.9226129\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  method = <bound method TestNCSCompiler.test_bitwise_shiftright_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>>\n\nFunction \'test_bitwise_shiftright_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:803:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_shiftright_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757135587040: 0, 1757135596224: 1, 1757135588832: 2, 1757135596112: 3, 1757135600256: 4, 1757135596784: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 803, in test_bitwise_shiftright_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_shiftright_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1222, in test_bitwise_unsigned_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_unsigned_right_shift_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  result = <TestCaseFunction test_bitwise_unsigned_right_shift_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82738.3985251\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>>\n\nFunction \'test_bitwise_unsigned_right_shift_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1222:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0x80000000;\\n                value >>>= 1;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E2BBE70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2BA890>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2147483648); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2BA580>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1222, in test_bitwise_unsigned_right_shift_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_unsigned_right_shift_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1319, in test_bitwise_unsigned_right_shift_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_unsigned_right_shift_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  result = <TestCaseFunction test_bitwise_unsigned_right_shift_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82738.9696567\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  method = <bound method TestNCSCompiler.test_bitwise_unsigned_right_shift_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>>\n\nFunction \'test_bitwise_unsigned_right_shift_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1319:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_unsigned_right_shift_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146585968: 0, 1757146583728: 1, 1757146591680: 2, 1757146583056: 3, 1757146584736: 4, 1757146584064: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1073741824],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1073741824],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1319, in test_bitwise_unsigned_right_shift_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_unsigned_right_shift_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1159, in test_bitwise_xor_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_xor_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  result = <TestCaseFunction test_bitwise_xor_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_xor_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82739.7172056\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  method = <bound method TestNCSCompiler.test_bitwise_xor_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>>\n\nFunction \'test_bitwise_xor_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1159:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 0xFF;\\n                value ^= 0x0F;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DDDE690>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E1937E0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(255); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E191EF0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1159, in test_bitwise_xor_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_xor_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 739, in test_bitwise_xor_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_bitwise_xor_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  result = <TestCaseFunction test_bitwise_xor_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_bitwise_xor_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82740.5085038\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  method = <bound method TestNCSCompiler.test_bitwise_xor_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>>\n\nFunction \'test_bitwise_xor_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:739:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_bitwise_xor_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757139439408: 0, 1757139440640: 1, 1757135599360: 2, 1757135599808: 3, 1757135601040: 4, 1757135600592: 5, 175713...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 739, in test_bitwise_xor_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_bitwise_xor_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3393, in test_call_int_with_no_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_int_with_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  result = <TestCaseFunction test_call_int_with_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_int_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82741.9537873\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  method = <bound method TestNCSCompiler.test_call_int_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>>\n\nFunction \'test_call_int_with_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3393:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757143419152: 0, 1757143419040: 1, 1757143664800: 2, 1757143666592: 3, 1757143665136: 4, 1757143666928: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3393, in test_call_int_with_no_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_int_with_no_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3418, in test_call_int_with_no_args_and_forward_declared\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_int_with_no_args_and_forward_declared>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  result = <TestCaseFunction test_call_int_with_no_args_and_forward_declared>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_int_with_no_args_and_forward_declared of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declare...\n  expecting_failure = False\n  outcome = None\n  start_time = 82742.7850886\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  method = <bound method TestNCSCompiler.test_call_int_with_no_args_and_forward_declared of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declare...\n\nFunction \'test_call_int_with_no_args_and_forward_declared\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3418:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_int_with_no_args_and_forward_declared>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757144317776: 0, 1757144317664: 1, 1757143420048: 2, 1757143422624: 3, 1757143417360: 4, 1757144311280: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3418, in test_call_int_with_no_args_and_forward_declared\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_int_with_no_args_and_forward_declared
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3309, in test_call_void_with_no_args\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  result = <TestCaseFunction test_call_void_with_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82745.0531273\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  method = <bound method TestNCSCompiler.test_call_void_with_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>>\n\nFunction \'test_call_void_with_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3309:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_no_args>\n  script = \'\\n            void test()\\n            {\\n                PrintInteger(123);\\n            }\\n\\n            void main()\\n            {\\n                test();\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n        _break_scope=Fa...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n        _break_scope=Fa...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DF401D0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67540>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DF67C40...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3309, in test_call_void_with_no_args\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_no_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3331, in test_call_void_with_one_arg\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_one_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  result = <TestCaseFunction test_call_void_with_one_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_one_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82745.675219\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  method = <bound method TestNCSCompiler.test_call_void_with_one_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>>\n\nFunction \'test_call_void_with_one_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3331:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_one_arg>\n  script = \'\\n            void test(int value)\\n            {\\n                PrintInteger(value);\\n            }\\n\\n            void main()\\n            {\\n                test(123);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n        _break_scope=Fa...,\n    line_num=7\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n        _break_scope=Fa...,\n    line_num=7\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774950>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-4, 4); #2: ACTION(4, 1); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C750>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C2F0...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DE8C...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=123)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3331, in test_call_void_with_one_arg\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_one_arg
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3353, in test_call_void_with_two_args\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_call_void_with_two_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  result = <TestCaseFunction test_call_void_with_two_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_call_void_with_two_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82746.2406897\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  method = <bound method TestNCSCompiler.test_call_void_with_two_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>>\n\nFunction \'test_call_void_with_two_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3353:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_call_void_with_two_args>\n  script = \'\\n            void test(int value1, int value2)\\n            {\\n                PrintInteger(value1);\\n                PrintInteger(value2);\\n            }\\n\\n            void main()\\n            {\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE83DD0>],\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-8, 4); #2: ACTION(4, 1); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D7166D0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D717850...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D716...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=1), IntExpression(value=2)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3353, in test_call_void_with_two_args\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_call_void_with_two_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3664, in test_comment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_comment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  result = <TestCaseFunction test_comment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_comment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82746.9216117\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  method = <bound method TestNCSCompiler.test_comment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>>\n\nFunction \'test_comment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3664:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_comment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (6 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757146588768: 0, 1757146589216: 1, 1757146592912: 2, 1757146591792: 3, 1757146591232: 4, 1757146588544: 5, 175714...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3664, in test_comment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_comment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 630, in test_compare_greaterthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_greaterthan_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  result = <TestCaseFunction test_compare_greaterthan_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_greaterthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82747.6747935\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  method = <bound method TestNCSCompiler.test_compare_greaterthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>>\n\nFunction \'test_compare_greaterthan_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:630:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthan_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757147054496: 0, 1757147070176: 1, 1757146584960: 2, 1757146589440: 3, 1757147060320: 4, 1757147064688: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 630, in test_compare_greaterthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_greaterthan_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 654, in test_compare_greaterthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_greaterthanorequal_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  result = <TestCaseFunction test_compare_greaterthanorequal_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_greaterthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82748.614422\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  method = <bound method TestNCSCompiler.test_compare_greaterthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>>\n\nFunction \'test_compare_greaterthanorequal_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:654:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_greaterthanorequal_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149086112: 0, 1757149086000: 1, 1757147058304: 2, 1757150023248: 3, 1757150023024: 4, 1757150022688: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 654, in test_compare_greaterthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_greaterthanorequal_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 678, in test_compare_lessthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_lessthan_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  result = <TestCaseFunction test_compare_lessthan_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_lessthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82749.5467762\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  method = <bound method TestNCSCompiler.test_compare_lessthan_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>>\n\nFunction \'test_compare_lessthan_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:678:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthan_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757149097872: 0, 1757149101120: 1, 1757149091712: 2, 1757149091376: 3, 1757149091152: 4, 1757149090928: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 678, in test_compare_lessthan_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_lessthan_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 702, in test_compare_lessthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_compare_lessthanorequal_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  result = <TestCaseFunction test_compare_lessthanorequal_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_compare_lessthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82750.5213929\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  method = <bound method TestNCSCompiler.test_compare_lessthanorequal_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>>\n\nFunction \'test_compare_lessthanorequal_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:702:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_compare_lessthanorequal_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (29 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757148280800: 0, 1757148280688: 1, 1757149101904: 2, 1757149098096: 3, 1757149100336: 4, 1757148270048: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 702, in test_compare_lessthanorequal_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_compare_lessthanorequal_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3971, in test_complex_expression_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -28 is out of range\n\nValueError: Stack offset -28 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_complex_expression_precedence>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  result = <TestCaseFunction test_complex_expression_precedence>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_complex_expression_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82751.1207034\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  method = <bound method TestNCSCompiler.test_complex_expression_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>>\n\nFunction \'test_complex_expression_precedence\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3971:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_complex_expression_precedence>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (51 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757150028512: 0, 1757150028400: 1, 1757148282144: 2, 1757148277776: 3, 1757148277216: 4, 1757148280128: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-28, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -28\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -28\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -28\n  msg = \'Stack offset -28 is out of range\'\n  remaining = 20\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3971, in test_complex_expression_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -28 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_complex_expression_precedence
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1346, in test_const_global_initialization\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_global_initialization>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  result = <TestCaseFunction test_const_global_initialization>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_global_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82753.2221259\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  method = <bound method TestNCSCompiler.test_const_global_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>>\n\nFunction \'test_const_global_initialization\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1346:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_global_initialization>\n  script = \'\\n            const float PI = 3.14159f;\\n            const string GREETING = "Hello";\\n\\n            void main()\\n            {\\n                PrintFloat(PI);\\n                PrintString(GREETING...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.format...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E1917F0>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'GREETING\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.STRING(string), struct=None),\n    expression=StringExpression(value=Hello),\n    is_const=True\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.format...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D774CB0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: RSADDF; #1: CONSTF(3.14159); #2: CPDOWNSP(-8, 4); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991E01CB00>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DA8E810>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991D776B10>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintString\', [ScriptParam(<DataType.STRING: \'string\'>, \'sString\', None)], \'// 1: Output sString to the log ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1346, in test_const_global_initialization\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_global_initialization
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1367, in test_const_local_declaration\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'local_const\'\n\nCompileError: Cannot assign to const variable \'local_const\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_local_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  result = <TestCaseFunction test_const_local_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_local_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82754.0672587\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  method = <bound method TestNCSCompiler.test_const_local_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>>\n\nFunction \'test_const_local_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1367:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_declaration>\n  script = \'\\n            void main()\\n            {\\n                const int local_const = 100;\\n                PrintInteger(local_const);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991DDDF3B0>],\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991DDDF3B0>],\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'local_const\'\n    ),\n    expression=IntExpression(value=100)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'local_const\'\n    ),\n    expression=IntExpression(value=100)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'local_const\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E11AB70>]\n    ),\n    expression=IntExpression(value=100)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E11AB70>]\n    ),\n    expression=IntExpression(value=100)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(100))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E205CC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DF42750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E205DA0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'local_const\'\n  msg = "Cannot assign to const variable \'local_const\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1367, in test_const_local_declaration\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'local_const\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_local_declaration
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1384, in test_const_local_initialization\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n\nCompileError: Cannot assign to const variable \'a\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_local_initialization>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  result = <TestCaseFunction test_const_local_initialization>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_local_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82754.6521833\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  method = <bound method TestNCSCompiler.test_const_local_initialization of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>>\n\nFunction \'test_const_local_initialization\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1384:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_local_initialization>\n  script = \'\\n            void main()\\n            {\\n                const int a = 10;\\n                const int b = a * 2;\\n                PrintInteger(b);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E6CA210>],\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E6CA210>],\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=10)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=10)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'a\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E3EED50>]\n    ),\n    expression=IntExpression(value=10)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E3EED50>]\n    ),\n    expression=IntExpression(value=10)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E4DB1C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6C8350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E4DA040>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'a\'\n  msg = "Cannot assign to const variable \'a\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1384, in test_const_local_initialization\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_local_initialization
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1454, in test_const_multi_declaration\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n\nCompileError: Cannot assign to const variable \'a\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_const_multi_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  result = <TestCaseFunction test_const_multi_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_const_multi_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82755.1215104\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  method = <bound method TestNCSCompiler.test_const_multi_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>>\n\nFunction \'test_const_multi_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1454:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_const_multi_declaration>\n  script = \'\\n            void main()\\n            {\\n                const int a = 1, b = 2, c = 3;\\n                PrintInteger(a);\\n                PrintInteger(b);\\n                PrintInteger(c);\\n       ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E458590>, <pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E...,\n    is_const=True\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E458590>, <pykotor.resource.formats.ncs.compiler.classes.VariableInitializer object at 0x000001991E...,\n    is_const=True\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=1)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2377:\n  self = VariableInitializer(\n    identifier=Identifier(\n        label=\'a\'\n    ),\n    expression=IntExpression(value=1)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  data_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_const = True\n  initial_temp_stack = 0\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'a\'\n    )\n)\n  assignment = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6B8D20>]\n    ),\n    expression=IntExpression(value=1)\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1555:\n  self = Assignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6B8D20>]\n    ),\n    expression=IntExpression(value=1)\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E600C20>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E45A150>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D577770>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  variable_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  is_global = False\n  expression_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  stack_index = -12\n  is_const = True\n  var_name = \'a\'\n  msg = "Cannot assign to const variable \'a\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1454, in test_const_multi_declaration\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2377, in compile\n    assignment.compile(ncs, root, block)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1555, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Cannot assign to const variable \'a\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_const_multi_declaration
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2620, in test_declaration_float\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_declaration_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  result = <TestCaseFunction test_declaration_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_declaration_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82756.0831603\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  method = <bound method TestNCSCompiler.test_declaration_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>>\n\nFunction \'test_declaration_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2620:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_declaration_float>\n  script = \'\\n            void main()\\n            {\\n                float a;\\n                PrintFloat(a);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47CE90>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E32F460>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(9); ... (5 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E32EE40>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2620, in test_declaration_float\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_declaration_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1096, in test_division_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_division_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  result = <TestCaseFunction test_division_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82757.937909\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  method = <bound method TestNCSCompiler.test_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>>\n\nFunction \'test_division_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1096:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_division_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 12;\\n                value /= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E342B10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E3AFF50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(12); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E3AE7B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1096, in test_division_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_division_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 405, in test_divop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_divop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  result = <TestCaseFunction test_divop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_divop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82758.8096631\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  method = <bound method TestNCSCompiler.test_divop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>>\n\nFunction \'test_divop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:405:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_divop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151241376: 0, 1757151242832: 1, 1757151246080: 2, 1757151244848: 3, 1757151247872: 4, 1757151239920: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 405, in test_divop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_divop_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1937, in test_do_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  result = <TestCaseFunction test_do_while_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.1556132\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  method = <bound method TestNCSCompiler.test_do_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>>\n\nFunction \'test_do_while_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1937:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E47C4D0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E2060B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E47E090>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E2059B0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991D56...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=SubtractionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E6AD090>]\n        ),\n       ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1937, in test_do_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2029, in test_do_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  result = <TestCaseFunction test_do_while_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.5672198\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  method = <bound method TestNCSCompiler.test_do_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>>\n\nFunction \'test_do_while_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2029:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_scope>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154536688: 0, 1757154537136: 1, 1757154530192: 2, 1757154530080: 3, 1757154529968: 4, 1757154529632: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2029, in test_do_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_scope
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1961, in test_do_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  result = <TestCaseFunction test_do_while_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82759.9364615\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  method = <bound method TestNCSCompiler.test_do_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>>\n\nFunction \'test_do_while_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1961:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E985D90>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E927540>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E987830>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E927EE0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E45...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = BreakStatement(\n    line_num=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1961, in test_do_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_with_break
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1984, in test_do_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_do_while_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  result = <TestCaseFunction test_do_while_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_do_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82760.3766772\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_do_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>>\n\nFunction \'test_do_while_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1984:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_do_while_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                do\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2519:\n  self = DoWhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  conditionstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DE81A30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (17 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E73A740>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E6CA450>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E73A5F0>, <pykotor.resource.formats.ncs.compiler.classes.DoWhileLoopBlock object at 0x000001991E01...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1984, in test_do_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2519, in compile\n    self.block.compile(\n    ~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        conditionstart,\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_do_while_loop_with_continue
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 268, in test_enginecall_GetFactionEqual\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_GetFactionEqual>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  result = <TestCaseFunction test_enginecall_GetFactionEqual>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_GetFactionEqual of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82761.5728118\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  method = <bound method TestNCSCompiler.test_enginecall_GetFactionEqual of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>>\n\nFunction \'test_enginecall_GetFactionEqual\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:268:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFactionEqual>\n  script = \'\\n            void main()\\n            {\\n                object oFirst;\\n                GetFactionEqual(oFirst);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E459130>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E6D50F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: CONSTO(0); ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D4EC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.INT: \'int\'>, \'GetFactionEqual\', [ScriptParam(<DataType.OBJECT: \'object\'>, \'oFirstObject\', None), ScriptParam(<DataType.OBJEC...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 268, in test_enginecall_GetFactionEqual\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_GetFactionEqual
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 254, in test_enginecall_GetFirstObjectInShape_defaults\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_GetFirstObjectInShape_defaults>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  result = <TestCaseFunction test_enginecall_GetFirstObjectInShape_defaults>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_GetFirstObjectInShape_defaults of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>...\n  expecting_failure = False\n  outcome = None\n  start_time = 82762.085302\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  method = <bound method TestNCSCompiler.test_enginecall_GetFirstObjectInShape_defaults of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>...\n\nFunction \'test_enginecall_GetFirstObjectInShape_defaults\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:254:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_GetFirstObjectInShape_defaults>\n  script = \'\\n            void main()\\n            {\\n                int nShape = SHAPE_CUBE;\\n                float fSize = 0.0;\\n                location lTarget;\\n                GetFirstObjectInShape(nShape...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ED50>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88ECF0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E924050>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(2); ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EA6DCC0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.OBJECT: \'object\'>, \'GetFirstObjectInShape\', [ScriptParam(<DataType.INT: \'int\'>, \'nShape\', None), ScriptParam(<DataType.FLOAT...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 254, in test_enginecall_GetFirstObjectInShape_defaults\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_GetFirstObjectInShape_defaults
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 242, in test_enginecall_delay_command_1\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_delay_command_1>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  result = <TestCaseFunction test_enginecall_delay_command_1>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_delay_command_1 of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82762.6017027\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  method = <bound method TestNCSCompiler.test_enginecall_delay_command_1 of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>>\n\nFunction \'test_enginecall_delay_command_1\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:242:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_delay_command_1>\n  script = \'\\n            void main()\\n            {\\n                object oFirstPlayer = GetFirstPC();\\n                DelayCommand(1.0, GiveXPToCreature(oFirstPlayer, 9001));\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E88EB70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E6D5A90>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDO; #2: ACTION(548, 0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6D69E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'DelayCommand\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fSeconds\', None), ScriptParam(<DataType.ACTION: \'act...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 242, in test_enginecall_delay_command_1\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_delay_command_1
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 214, in test_enginecall_with_default_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1114, in copy_to_top\n    raise IndexError(msg)\nIndexError: Offset -16 exceeds stack size 12\n\nIndexError: Offset -16 exceeds stack size 12\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_with_default_params>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  result = <TestCaseFunction test_enginecall_with_default_params>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_with_default_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82763.9827426\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  method = <bound method TestNCSCompiler.test_enginecall_with_default_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>>\n\nFunction \'test_enginecall_with_default_params\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:214:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_default_params>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:134:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (12 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None),\n    _cursor_index=9,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757151244736: 0, 1757151240592: 1, 1757146584400: 2, 1757146585632: 3, 1757146592352: 4, 1757154526944: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=CPTOPSP, args=[-16, 4], jump=None)\n  index = 9\n  jump_value = None\n\nFunction \'copy_to_top\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1114:\n  self = Stack(\n    _stack=[STRING=something, OBJECT=1, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  msg = \'Offset -16 exceeds stack size 12\'\n  offset_abs = 16\n  total_bytes = 12\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 214, in test_enginecall_with_default_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1114, in copy_to_top\n    raise IndexError(msg)\nIndexError: Offset -16 exceeds stack size 12\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_default_params
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 195, in test_enginecall_with_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 140, in step_execute\n    self.do_action(\n    ~~~~~~~~~~~~~~^\n        self._functions[cursor.args[0]],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        cursor.args[1],\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 476, in do_action\n    raise ValueError(msg)\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\n\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_enginecall_with_params>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  result = <TestCaseFunction test_enginecall_with_params>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_enginecall_with_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82765.1479883\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  method = <bound method TestNCSCompiler.test_enginecall_with_params of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>>\n\nFunction \'test_enginecall_with_params\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:195:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_enginecall_with_params>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:140:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n  cursor = NCSInstruction(type=ACTION, args=[200, 2], jump=None)\n  index = 14\n  jump_value = None\n\nFunction \'do_action\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:476:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (16 more)),\n    _cursor=NCSInstruction(type=ACTION, args=[200, 2], jump=None),\n    _cursor_index=14,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757161260656: 0, 1757155146480: 1, 1757156818544: 2, 1757156814288: 3, 1757156814848: 4, 1757156815072: 5, 175715...<truncated>\n  function = ScriptFunction(<DataType.OBJECT: \'object\'>, \'GetObjectByTag\', [ScriptParam(<DataType.STRING: \'string\'>, \'sTag\', None), ScriptParam(<DataType.INT: \'int\'>, \'nNth\', \'0\')], \'// 200: Get the nNth object with the specified tag.\\r\\n// - sTag\\r\\n// - nNth: the nth object with this tag may be requested\\r\\n// * Returns OBJECT_INVALID if the object cannot be found.\\r\\nobject GetObjectByTag(string sTag, int nNth=0);\', \'// 200: Get the nNth object with the specified tag.\\r\\n// - sTag\\r\\n// - nNth: the nth object with this tag may be requested\\r\\n// * Returns OBJECT_INVALID if the object cannot be found.\\r\\nobject GetObjectByTag(string sTag, int nNth=0);\')\n  args = 2\n  msg = "Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'"\n  args_snap = [INT=15, INT=0]\n  i = 0\n  param_index = 0\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 195, in test_enginecall_with_params\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 140, in step_execute\n    self.do_action(\n    ~~~~~~~~~~~~~~^\n        self._functions[cursor.args[0]],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        cursor.args[1],\n        ^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 476, in do_action\n    raise ValueError(msg)\nValueError: Action \'GetObjectByTag\' parameter \'sTag\' expects type STRING but got INT with value \'15\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_enginecall_with_params
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3992, in test_expression_with_all_operators\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_expression_with_all_operators>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  result = <TestCaseFunction test_expression_with_all_operators>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_expression_with_all_operators of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.0978838\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  method = <bound method TestNCSCompiler.test_expression_with_all_operators of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>>\n\nFunction \'test_expression_with_all_operators\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3992:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_expression_with_all_operators>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (37 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757154533440: 0, 1757154533328: 1, 1757156804880: 2, 1757156809584: 3, 1757156809360: 4, 1757156806112: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3992, in test_expression_with_all_operators\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_expression_with_all_operators
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2657, in test_float_notations\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_float_notations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  result = <TestCaseFunction test_float_notations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_float_notations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.4568606\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  method = <bound method TestNCSCompiler.test_float_notations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>>\n\nFunction \'test_float_notations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2657:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_float_notations>\n  script = \'\\n            void main()\\n            {\\n                PrintFloat(1.0f);\\n                PrintFloat(2.0);\\n                PrintFloat(3f);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.format...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.format...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E984350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(9); #2: CONSTI(18); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E6026D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2657, in test_float_notations\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_float_notations
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2037, in test_for_loop\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  result = <TestCaseFunction test_for_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82766.8386607\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  method = <bound method TestNCSCompiler.test_for_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>>\n\nFunction \'test_for_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2037:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                }\\n       ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF93690>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991D563E00...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (24 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF93E00>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E937340>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E936440>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA158B0>],\n            _parent=None,\n  ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2037, in test_for_loop\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2107, in test_for_loop_scope\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  result = <TestCaseFunction test_for_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82767.2326452\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  method = <bound method TestNCSCompiler.test_for_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>>\n\nFunction \'test_for_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2107:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_scope>\n  script = \'\\n            void main()\\n            {\\n                int i = 11;\\n                int outer = 22;\\n                for (i = 0; i <= 5; i += 1)\\n                {\\n                    int inner =...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E5098B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E509370>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EB5F310>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(11); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EB5E0B0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2107, in test_for_loop_scope\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_scope
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2060, in test_for_loop_with_break\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  result = <TestCaseFunction test_for_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82767.6684771\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  method = <bound method TestNCSCompiler.test_for_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>>\n\nFunction \'test_for_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2060:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                    break;...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991E9BBB60>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E7F6350...,\n    _break_scope=True,\n    temp_stack=16\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (26 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991E9BAEB0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EF9E2B0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EF9E120>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991E50A990>],\n            _parent=None,\n  ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 16\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2060, in test_for_loop_with_break\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 16\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_with_break
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2082, in test_for_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2590, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, updatestart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_for_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  result = <TestCaseFunction test_for_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_for_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82768.0215883\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_for_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>>\n\nFunction \'test_for_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2082:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_for_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int i = 99;\\n                for (i = 1; i <= 3; i += 1)\\n                {\\n                    PrintInteger(i);\\n                    contin...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EAF8FF0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E98D4F0>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2590:\n  self = ForLoopBlock(\n    line_num=None,\n    initial=Assignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991EAF8FF0>]\n        ),\n        expression=In...,\n    condition=BinaryOperatorExpression(\n        expression1=IdentifierExpression(identifier=i),\n        expression2=IntExpression(value=3),\n        compatibility=[BinaryOperatorMapping(instruction=<NCSIns...,\n    iteration=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991E98D4F0>]\n        ),\n        exp...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  initial_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  updatestart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EA16C30>, <pykotor.resource.formats.ncs.compiler.classes.ContinueStatement object at 0x000001991EC4...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(99); ... (20 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF907C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14050>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991EF91CC0>, <pykotor.resource.formats.ncs.compiler.classes.ForLoopBlock object at 0x000001991E94DA70...,\n    _break_scope=True,\n    temp_stack=8\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2082, in test_for_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2590, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, updatestart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_for_loop_with_continue
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1284, in test_global_bitwise_assignment\n    assert snap.arg_values == [15]  # 0xFF & 0x0F = 0x0F = 15\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\n\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_bitwise_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  result = <TestCaseFunction test_global_bitwise_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_bitwise_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82768.4415745\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  method = <bound method TestNCSCompiler.test_global_bitwise_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>>\n\nFunction \'test_global_bitwise_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1284:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_bitwise_assignment>\n  ncs = NCS(#0: RSADDI; #1: CONSTI(255); #2: CPDOWNSP(-8, 4); ... (19 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: RSADDI; #1: CONSTI(255); #2: CPDOWNSP(-8, 4); ... (19 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757156812720: 0, 1757156803424: 1, 1757156805776: 2, 1757156813392: 3, 1757156808800: 4, 1757157421728: 5, 1757157421840: 6, 1757157414112: 7, 1...<truncated>\n  snap = ActionSnapshot(function_name=\'PrintInteger\', arg_values=[INT=0], return_value=None)\n  @py_assert1 = [INT=0]\n  @py_assert4 = [15]\n  @py_assert3 = False\n  @py_format6 = \'[INT=0] == [15]\\n~\\n~At index 0 diff: INT=0 != 15\\n~\\n~Full diff:\\n~  [\\n~-     15,\\n~+     INT=0,\\n~  ]\'\n  @py_format8 = \'assert [INT=0] == [15]\\n~\\n~At index 0 diff: INT=0 != 15\\n~\\n~Full diff:\\n~  [\\n~-     15,\\n~+     INT=0,\\n~  ]\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1284, in test_global_bitwise_assignment\n    assert snap.arg_values == [15]  # 0xFF & 0x0F = 0x0F = 15\n    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError: assert [INT=0] == [15]\n  \n  At index 0 diff: INT=0 != 15\n  \n  Full diff:\n    [\n  -     15,\n  +     INT=0,\n    ]\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_bitwise_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2447, in test_global_initializations\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_initializations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  result = <TestCaseFunction test_global_initializations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_initializations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82785.9539377\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  method = <bound method TestNCSCompiler.test_global_initializations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>>\n\nFunction \'test_global_initializations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2447:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_initializations>\n  script = \'\\n            int INT = 0;\\n            float FLOAT = 0.0;\\n            string STRING = "";\\n            vector VECTOR = [0.0, 0.0, 0.0];\\n\\n            void main()\\n            {\\n                Pr...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.format...,\n    line_num=7\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EBE5DA0>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'VECTOR\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.VECTOR(vector), struct=None),\n    expression=VectorExpression(x=FloatExpression(value=0.0), y=FloatExpression(value=0.0), z=FloatExpression(value=0.0)),\n    is_const=False\n)\n  entry_index = 21\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.format...,\n    line_num=7\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1D610>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991E...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(0); #2: CPDOWNSP(-8, 4); ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F418050>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4C7D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EF4DE50>, <pyko...,\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintString\', [ScriptParam(<DataType.STRING: \'string\'>, \'sString\', None)], \'// 1: Output sString to the log ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2447, in test_global_initializations\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_initializations
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2491, in test_global_int_addition_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_addition_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  result = <TestCaseFunction test_global_int_addition_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_addition_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82788.3033634\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_addition_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>>\n\nFunction \'test_global_int_addition_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2491:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_addition_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 2;\\n\\n            void main()\\n            {\\n                int local1 = 3;\\n                int local2 = 4;\\n\\n                global1 += ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F21D860>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=2),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA630>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA7B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F21C520>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EC57070>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFA870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8EF0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2491, in test_global_int_addition_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_addition_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2575, in test_global_int_division_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_division_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  result = <TestCaseFunction test_global_int_division_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82790.347039\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_division_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>>\n\nFunction \'test_global_int_division_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2575:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_division_assignment>\n  script = \'\\n            int global1 = 1000;\\n            int global2 = 100;\\n\\n            void main()\\n            {\\n                int local1 = 10;\\n                int local2 = 1;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F269320>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=100),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8830>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8770>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F2694E0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1000); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991EF3B650>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8710>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEFB7D0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2575, in test_global_int_division_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_division_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2547, in test_global_int_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_multiplication_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  result = <TestCaseFunction test_global_int_multiplication_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82793.0512667\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>>\n\nFunction \'test_global_int_multiplication_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2547:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_multiplication_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 10;\\n\\n            void main()\\n            {\\n                int local1 = 100;\\n                int local2 = 1000;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F110E50>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=10),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA150>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA870>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F26BE00>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991F20C9F0>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA8D0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F1DA810>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2547, in test_global_int_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_multiplication_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2519, in test_global_int_subtraction_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_global_int_subtraction_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  result = <TestCaseFunction test_global_int_subtraction_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_global_int_subtraction_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82793.9697262\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  method = <bound method TestNCSCompiler.test_global_int_subtraction_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>>\n\nFunction \'test_global_int_subtraction_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2519:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_global_int_subtraction_assignment>\n  script = \'\\n            int global1 = 1;\\n            int global2 = 10;\\n\\n            void main()\\n            {\\n                int local1 = 100;\\n                int local2 = 1000;\\n\\n                globa...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x0000...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F113850>]\n  global_def = GlobalVariableInitialization(\n    identifier=Identifier(\n        label=\'global2\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    expression=IntExpression(value=10),\n    is_const=False\n)\n  entry_index = 9\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EA14AD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F112BA0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: CONSTI(1); #2: CPDOWNSP(-8, 4); ... (33 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object at 0x000001991ED3E670>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableInitialization object a...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8110>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991EEF8BF0>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2519, in test_global_int_subtraction_assignment\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_global_int_subtraction_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1674, in test_if\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  result = <TestCaseFunction test_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82794.8711525\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  method = <bound method TestNCSCompiler.test_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>>\n\nFunction \'test_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1674:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if>\n  script = \'\\n            void main()\\n            {\\n                if(0)\\n                {\\n                    PrintInteger(0);\\n                }\\n\\n                if(1)\\n                {\\n              ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991EAC4440>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991EAC4440>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA3C0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F36A990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EF4F290>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EF4F290>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F0D8AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EAC41A0>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA3C0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1674, in test_if\n    ncs = self.compile(\n        """\n    ...<12 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1716, in test_if_else\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  result = <TestCaseFunction test_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82796.9124773\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  method = <bound method TestNCSCompiler.test_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>>\n\nFunction \'test_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1716:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0) {    PrintInteger(0); }\\n                else {      PrintInteger(1); }\\n\\n                if (1) {    PrintInteger(2); }\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991DF22D50>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA4A0>],\n        _break_scope=False,\n...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991DF22D50>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F0DA4A0>],\n        _break_scope=False,\n...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991ED4C670>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C180...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1F6B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EB1F6B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991ED4C3D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991DF22490>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991ED4C670>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1716, in test_if_else\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1738, in test_if_else_if\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  result = <TestCaseFunction test_if_else_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82799.5749412\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  method = <bound method TestNCSCompiler.test_if_else_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>>\n\nFunction \'test_if_else_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1738:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if>\n  script = \'\\n            void main()\\n            {\\n                if (0)      { PrintInteger(0); }\\n                else if (0) { PrintInteger(1); }\\n\\n                if (1)      { PrintInteger(2); } // hit...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F04C770>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C640>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F04C770>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F04C640>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF84AD0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991EB77680...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F103FB0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F103FB0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991EF86C80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991D5E0710>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF84AD0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1738, in test_if_else_if\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else_if
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1767, in test_if_else_if_else\n    ncs = self.compile(\n        """\n    ...<18 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_else_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  result = <TestCaseFunction test_if_else_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82801.5773761\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  method = <bound method TestNCSCompiler.test_if_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>>\n\nFunction \'test_if_else_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1767:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_else_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0)      { PrintInteger(0); }\\n                else if (0) { PrintInteger(1); }\\n                else        { PrintInteger(3); } // hit\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.n...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F10FCB0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10FAF0>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F10FCB0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10FAF0>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF86BA0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F85E990...,\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF32F0>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF32F0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F7698D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F10F930>, <pykotor.resource.formats...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991EF86BA0>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1767, in test_if_else_if_else\n    ncs = self.compile(\n        """\n    ...<18 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_else_if_else
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1699, in test_if_multiple_conditions\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_if_multiple_conditions>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  result = <TestCaseFunction test_if_multiple_conditions>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_if_multiple_conditions of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82803.6675882\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  method = <bound method TestNCSCompiler.test_if_multiple_conditions of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>>\n\nFunction \'test_if_multiple_conditions\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1699:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_if_multiple_conditions>\n  script = \'\\n            void main()\\n            {\\n                if(1 && 2 && 3)\\n                {\\n                    PrintInteger(0);\\n                }\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F7C1EF0>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F7C1EF0>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=BinaryOperatorExpression(\n        expression1=BinaryOperatorExpression(\n            expression1=IntExpression(value=1),\n            expression2=IntExpression(value=2),\n            compatibil...,\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F76BD90>],\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n    _break_scope=False,\n    temp_stack=12\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF0A70>],\n    _break_scope=False,\n    temp_stack=4\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991EEF0A70>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: CONSTI(2); ... (8 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F769D30>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F5F4370>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.CodeBlock object at 0x000001991F76BD90>],\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1699, in test_if_multiple_conditions\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_if_multiple_conditions
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3541, in test_include_builtin\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n        library={"otherscript": otherscript},\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_include_builtin>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  result = <TestCaseFunction test_include_builtin>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_include_builtin of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82809.7229541\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  method = <bound method TestNCSCompiler.test_include_builtin of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>>\n\nFunction \'test_include_builtin\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3541:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  otherscript = b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_builtin>\n  script = \'\\n            #include "otherscript"\\n\\n            void main()\\n            {\\n                TestFunc();\\n            }\\n        \'\n  library = {\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = [<pykotor.resource.formats.ncs.compiler.classes.IncludeScript object at 0x000001991EC4B250>]\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  includes = []\n  include = IncludeScript(\n    file=StringExpression(value=otherscript),\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'}\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'TestFunc\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F4ABD70>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469160>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F46A890...,\n    library={\'otherscript\': b\'\\n            void TestFunc()\\n            {\\n                PrintInteger(123);\\n            }\\n        \'},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3541, in test_include_builtin\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n        library={"otherscript": otherscript},\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_include_builtin
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3562, in test_include_lookup\n    ncs: NCS = self.compile(\n               ~~~~~~~~~~~~^\n        """\n        ^^^\n    ...<7 lines>...\n        library_lookup=[includetest_script_path],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_include_lookup>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  result = <TestCaseFunction test_include_lookup>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_include_lookup of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82812.114544\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  method = <bound method TestNCSCompiler.test_include_lookup of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>>\n\nFunction \'test_include_lookup\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3562:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  includetest_script_path = WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_include_lookup>\n  script = \'\\n            #include "includetest"\\n\\n            void main()\\n            {\\n                TestFunc();\\n            }\\n        \'\n  library = {}\n  library_lookup = [WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n  normalized_lookup = [WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n  first_item = WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[WindowsPath(\'G:/GitHub/PyKotor/tests/test_pykotor/test_files\')]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  included = [<pykotor.resource.formats.ncs.compiler.classes.IncludeScript object at 0x000001991F36B110>]\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  includes = []\n  include = IncludeScript(\n    file=StringExpression(value=includetest),\n    library={}\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'TestFunc\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n        _break_scope=Fa...,\n    line_num=8\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'TestFunc\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F6CC230>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(123); #2: ACTION(4, 1); ... (2 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EA580>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F469400...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[WindowsPath(G:\\GitHub\\PyKotor\\tests\\test_pykotor\\test_files)],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3562, in test_include_lookup\n    ncs: NCS = self.compile(\n               ~~~~~~~~~~~~^\n        """\n        ^^^\n    ...<7 lines>...\n        library_lookup=[includetest_script_path],\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_include_lookup
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3525, in test_int_parenthesis_declaration\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_int_parenthesis_declaration>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  result = <TestCaseFunction test_int_parenthesis_declaration>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_int_parenthesis_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82813.9909028\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  method = <bound method TestNCSCompiler.test_int_parenthesis_declaration of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>>\n\nFunction \'test_int_parenthesis_declaration\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3525:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_int_parenthesis_declaration>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (9 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171870400: 0, 1757171875216: 1, 1757171872416: 2, 1757171873536: 3, 1757171872304: 4, 1757171874544: 5, 175717...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=123],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=123],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3525, in test_int_parenthesis_declaration\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_int_parenthesis_declaration
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 547, in test_logical_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_and_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  result = <TestCaseFunction test_logical_and_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82816.6658477\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  method = <bound method TestNCSCompiler.test_logical_and_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>>\n\nFunction \'test_logical_and_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:547:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_and_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757172437344: 0, 1757172433984: 1, 1757172449104: 2, 1757172441488: 3, 1757172437568: 4, 1757172434768: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 547, in test_logical_and_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_and_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 586, in test_logical_equals\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_equals>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  result = <TestCaseFunction test_logical_equals>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_equals of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82818.3860818\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  method = <bound method TestNCSCompiler.test_logical_equals of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>>\n\nFunction \'test_logical_equals\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:586:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_equals>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171865808: 0, 1757171865920: 1, 1757167917824: 2, 1757167916928: 3, 1757167918048: 4, 1757167915360: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 586, in test_logical_equals\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_equals
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 604, in test_logical_notequals_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_notequals_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  result = <TestCaseFunction test_logical_notequals_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_notequals_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82820.5488276\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  method = <bound method TestNCSCompiler.test_logical_notequals_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>>\n\nFunction \'test_logical_notequals_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:604:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_notequals_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165111568: 0, 1757165111680: 1, 1757171868608: 2, 1757171866256: 3, 1757171869952: 4, 1757171868384: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 604, in test_logical_notequals_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_notequals_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 567, in test_logical_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_logical_or_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  result = <TestCaseFunction test_logical_or_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_logical_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82821.492427\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  method = <bound method TestNCSCompiler.test_logical_or_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>>\n\nFunction \'test_logical_or_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:567:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_logical_or_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165740432: 0, 1757165735280: 1, 1757165122320: 2, 1757165118848: 3, 1757165119968: 4, 1757165111120: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 567, in test_logical_or_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_logical_or_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 437, in test_modop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_modop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  result = <TestCaseFunction test_modop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_modop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82824.9839435\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  method = <bound method TestNCSCompiler.test_modop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>>\n\nFunction \'test_modop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:437:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165733264: 0, 1757167925776: 1, 1757167917712: 2, 1757167914352: 3, 1757167915472: 4, 1757167916480: 5, 175716...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 437, in test_modop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_modop_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1288, in test_modulo_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_modulo_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  result = <TestCaseFunction test_modulo_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_modulo_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82826.5323436\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  method = <bound method TestNCSCompiler.test_modulo_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>>\n\nFunction \'test_modulo_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1288:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_modulo_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 17;\\n                value %= 5;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F6CC650>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D5D64A0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(17); ... (11 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D5D6120>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1288, in test_modulo_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_modulo_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 373, in test_mulop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_mulop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  result = <TestCaseFunction test_mulop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_mulop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82828.984203\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  method = <bound method TestNCSCompiler.test_mulop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>>\n\nFunction \'test_mulop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:373:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_mulop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165113808: 0, 1757165113696: 1, 1757165109552: 2, 1757165121760: 3, 1757165109664: 4, 1757165112688: 5, 175716...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=50],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=50],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 373, in test_mulop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_mulop_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2395, in test_multi_declarations\n    assert interpreter.action_snapshots[-3].arg_values[0] == 0\nAssertionError: assert INT=1 == 0\n\nAssertionError: assert INT=1 == 0\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_multi_declarations>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  result = <TestCaseFunction test_multi_declarations>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_multi_declarations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82829.8826656\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  method = <bound method TestNCSCompiler.test_multi_declarations of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>>\n\nFunction \'test_multi_declarations\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2395:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multi_declarations>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (20 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757166342832: 0, 1757166339920: 1, 1757172441264: 2, 1757172435776: 3, 1757172438016: 4, 1757172441936: 5, 1757172442496: 6, 1757172442832: 7, 1757172447536: 8, 1...<truncated>\n  @py_assert0 = INT=1\n  @py_assert3 = 0\n  @py_assert2 = False\n  @py_format5 = \'INT=1 == 0\'\n  @py_format7 = \'assert INT=1 == 0\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2395, in test_multi_declarations\n    assert interpreter.action_snapshots[-3].arg_values[0] == 0\nAssertionError: assert INT=1 == 0\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_multi_declarations
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1075, in test_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_multiplication_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  result = <TestCaseFunction test_multiplication_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82831.8966654\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  method = <bound method TestNCSCompiler.test_multiplication_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>>\n\nFunction \'test_multiplication_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1075:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_multiplication_assignment>\n  script = \'\\n            void main()\\n            {\\n                int value = 10;\\n                value *= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F9B4BF0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F33E120>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F5EB4D0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1075, in test_multiplication_assignment\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_multiplication_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 454, in test_negop_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_negop_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  result = <TestCaseFunction test_negop_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_negop_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82833.768683\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  method = <bound method TestNCSCompiler.test_negop_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>>\n\nFunction \'test_negop_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:454:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_negop_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171873088: 0, 1757171860880: 1, 1757171875664: 2, 1757171865472: 3, 1757171864240: 4, 1757171864352: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=-10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=-10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 454, in test_negop_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_negop_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3921, in test_nested_struct_access\n    ncs = self.compile(\n        """\n    ...<19 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2336, in compile\n    root.struct_map[struct_name].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 266, in initialize\n    member.initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 317, in initialize\n    root.struct_map[self.identifier.label].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nKeyError: \'inner\'\n\nKeyError: \'inner\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_nested_struct_access>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  result = <TestCaseFunction test_nested_struct_access>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_nested_struct_access of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82838.5923814\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  method = <bound method TestNCSCompiler.test_nested_struct_access of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>>\n\nFunction \'test_nested_struct_access\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3921:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nested_struct_access>\n  script = \'\\n            struct Inner\\n            {\\n                int value;\\n            };\\n\\n            struct Outer\\n            {\\n                struct Inner inner;\\n                string name;\\n  ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.forma...,\n    line_num=13\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>]\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FA39A90>]\n  global_def = StructDefinition(\n    identifier=Identifier(\n        label=\'Outer\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991D5F5590>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991F72CCD0>]\n)\n  entry_index = 1\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.forma...,\n    line_num=13\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableDeclarator object at 0x000001991F2FAB70>],\n    is_const=False\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2298:\n  self = DeclarationStatement(\n    line_num=None,\n    data_type=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer),\n    declarators=[<pykotor.resource.formats.ncs.compiler.classes.VariableDeclarator object at 0x000001991F2FAB70>],\n    is_const=False\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  declarator = VariableDeclarator(\n    identifier=Identifier(\n        label=\'outer\'\n    )\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2336:\n  self = VariableDeclarator(\n    identifier=Identifier(\n        label=\'outer\'\n    )\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F3D6350>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=0\n)\n  data_type = DynamicDataType(builtin=DataType.STRUCT(struct), struct=Outer)\n  is_const = False\n  struct_name = \'Outer\'\n\nFunction \'initialize\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:266:\n  self = Struct(\n    identifier=Identifier(\n        label=\'Outer\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991D5F5590>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x000001991F72CCD0>],\n    _cached_size=None\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\n  member = StructMember(\n    datatype=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Inner),\n    identifier=Identifier(\n        label=\'inner\'\n    )\n)\n\nFunction \'initialize\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:317:\n  self = StructMember(\n    datatype=DynamicDataType(builtin=DataType.STRUCT(struct), struct=Inner),\n    identifier=Identifier(\n        label=\'inner\'\n    )\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991EAC42F0>, <pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991F72ED50>, <...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'Inner\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991EAC4830>, \'Outer\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991F72EE90>}\n)\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3921, in test_nested_struct_access\n    ncs = self.compile(\n        """\n    ...<19 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2298, in compile\n    declarator.compile(ncs, root, block, self.data_type, self.is_const)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2336, in compile\n    root.struct_map[struct_name].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 266, in initialize\n    member.initialize(ncs, root)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 317, in initialize\n    root.struct_map[self.identifier.label].initialize(ncs, root)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^\nKeyError: \'inner\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_nested_struct_access
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3712, in test_nop_statement\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 102, in compile\n    t = parser.parse(script, tracking=True)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 331, in parse\n    return self.parseopt(input, lexer, debug, tracking, tokenfunc)\n           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 909, in parseopt\n    tok = call_errorfunc(self.errorfunc, errtoken, self)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 192, in call_errorfunc\n    r = errorfunc(token)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py", line 133, in p_error\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\n\nCompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_nop_statement>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  result = <TestCaseFunction test_nop_statement>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_nop_statement of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82839.601422\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  method = <bound method TestNCSCompiler.test_nop_statement of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>>\n\nFunction \'test_nop_statement\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3712:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:102:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_nop_statement>\n  script = \'\\n            void main()\\n            {\\n                NOP "test message";\\n                PrintInteger(42);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n\nFunction \'parse\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:331:\n  self = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n  lexer = None\n  debug = False\n  tracking = True\n  tokenfunc = None\n\nFunction \'parseopt\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:909:\n  self = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n  lexer = Lexer(\n    lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSELF_VALUE>OBJECT_SELF\\...,\n    lexretext=[\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSELF_VALUE>OBJECT_SELF\\\\b)|(?P<...,\n    lexstatere={\'INITIAL\': [(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMME...<truncated>\n  debug = False\n  tracking = True\n  tokenfunc = None\n  lookahead = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  lookaheadstack = []\n  actions = {0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE\': -2, ...\n  goto = {0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initialization\': 7...\n  prod = [Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_root_object ->...\n  defaulted_states = {10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131}\n  pslice = YaccProduction(\n    slice=[function_definition_params],\n    stack=[$end, code_root, data_type, LexToken(IDENTIFIER,<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991FB6E670>,2,18), LexToken((,\'(\',2,22), function_definition_params, ...,\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...,\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...\n)\n  errorcount = 3\n  lex = <module \'ply.lex\' from \'C:\\\\Users\\\\boden\\\\AppData\\\\Roaming\\\\Python\\\\Python313\\\\site-packages\\\\ply\\\\lex.py\'>\n  get_token = <bound method Lexer.token of <ply.lex.Lexer object at 0x000001991FAF4180>>\n  statestack = [0, 1, 9, 26, 31, 38, 65, 118, 164]\n  symstack = [$end, code_root, data_type, LexToken(IDENTIFIER,<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991FB6E670>,2,18), LexToken((,\'(\',2,22), function_definition_params, LexTok...\n  errtoken = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  sym = function_definition_params\n  state = 164\n  ltype = \'STRING_VALUE\'\n  t = None\n  p = Production(function_definition_params -> <empty>)\n  pname = \'function_definition_params\'\n  plen = 0\n  targ = [function_definition_params]\n  t1 = LexToken(VOID_TYPE,<DataType.VOID: \'void\'>,2,13)\n\nFunction \'call_errorfunc\' at C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py:192:\n  errorfunc = <bound method NssParser.p_error of <pykotor.resource.formats.ncs.compiler.parser.NssParser object at 0x000001991F3B0830>>\n  token = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, ...<truncated>\n\nFunction \'p_error\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py:133:\n  self = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  p = LexToken(STRING_VALUE,StringExpression(value=test message),4,59)\n  msg = "Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'"\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3712, in test_nop_statement\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 102, in compile\n    t = parser.parse(script, tracking=True)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 331, in parse\n    return self.parseopt(input, lexer, debug, tracking, tokenfunc)\n           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 909, in parseopt\n    tok = call_errorfunc(self.errorfunc, errtoken, self)\n  File "C:\\Users\\boden\\AppData\\Roaming\\Python\\Python313\\site-packages\\ply\\yacc.py", line 192, in call_errorfunc\n    r = errorfunc(token)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\parser.py", line 133, in p_error\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Syntax error at line 4, position 59, token=\'StringExpression(value=test message)\'\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_nop_statement
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 529, in test_not_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_not_op>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  result = <TestCaseFunction test_not_op>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_not_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82840.6130561\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  method = <bound method TestNCSCompiler.test_not_op of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>>\n\nFunction \'test_not_op\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:529:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_not_op>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (10 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=6,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165736512: 0, 1757165742784: 1, 1757165732816: 2, 1757165736288: 3, 1757165735056: 4, 1757165734720: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 6\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=0],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 529, in test_not_op\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_not_op
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 508, in test_op_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_op_with_variables>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  result = <TestCaseFunction test_op_with_variables>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_op_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82841.5585507\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  method = <bound method TestNCSCompiler.test_op_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>>\n\nFunction \'test_op_with_variables\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:508:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_op_with_variables>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (26 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173747616: 0, 1757173746272: 1, 1757191101408: 2, 1757191099840: 3, 1757191102304: 4, 1757191102864: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 508, in test_op_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_op_with_variables
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2989, in test_postfix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_postfix_decrement_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  result = <TestCaseFunction test_postfix_decrement_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_postfix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82844.1666498\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  method = <bound method TestNCSCompiler.test_postfix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>>\n\nFunction \'test_postfix_decrement_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2989:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_decrement_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171819680: 0, 1757171811056: 1, 1757173750304: 2, 1757173751984: 3, 1757173752432: 4, 1757173753776: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2989, in test_postfix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_decrement_sp_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2903, in test_postfix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_postfix_increment_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  result = <TestCaseFunction test_postfix_increment_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_postfix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82847.2746827\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  method = <bound method TestNCSCompiler.test_postfix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>>\n\nFunction \'test_postfix_increment_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2903:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_postfix_increment_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757191101632: 0, 1757191108464: 1, 1757134287968: 2, 1757171822032: 3, 1757171822928: 4, 1757171819456: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2903, in test_postfix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_postfix_increment_sp_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2946, in test_prefix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prefix_decrement_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  result = <TestCaseFunction test_prefix_decrement_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prefix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82848.8526891\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  method = <bound method TestNCSCompiler.test_prefix_decrement_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>>\n\nFunction \'test_prefix_decrement_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2946:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_decrement_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757165738976: 0, 1757165748048: 1, 1757165594208: 2, 1757173749072: 3, 1757173744704: 4, 1757173748512: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2946, in test_prefix_decrement_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_decrement_sp_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2860, in test_prefix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prefix_increment_sp_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  result = <TestCaseFunction test_prefix_increment_sp_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prefix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82850.6498942\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  method = <bound method TestNCSCompiler.test_prefix_increment_sp_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>>\n\nFunction \'test_prefix_increment_sp_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2860:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prefix_increment_sp_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (18 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757194226608: 0, 1757194227392: 1, 1757194229968: 2, 1757194232656: 3, 1757194234672: 4, 1757194225600: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2860, in test_prefix_increment_sp_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prefix_increment_sp_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3223, in test_prototype_default_before_required\n    self.assertRaises(CompileError, self.compile, source)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 795, in assertRaises\n    return context.handle(\'assertRaises\', args, kwargs)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 238, in handle\n    callable_obj(*args, **kwargs)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_default_before_required>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  result = <TestCaseFunction test_prototype_default_before_required>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_default_before_required of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82853.6119555\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  method = <bound method TestNCSCompiler.test_prototype_default_before_required of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n\nFunction \'test_prototype_default_before_required\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3223:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  source = \'\\n            void test(int value1 = 123, int value2);\\n\\n            void main()\\n            {\\n                test(123, 123);\\n            }\\n\\n            void test(int value1 = 123, int value2)...\n\nFunction \'assertRaises\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:795:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>\n  expected_exception = <class \'pykotor.resource.formats.ncs.compiler.classes.CompileError\'>\n  args = (<bound method CompilerTestBase.compile of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>, \'\\n            void test(int value1 = 123,...\n  kwargs = {}\n  context = None\n\nFunction \'handle\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:238:\n  self = None\n  name = \'assertRaises\'\n  args = [\'\\n            void test(int value1 = 123, int value2);\\n\\n            void main()\\n            {\\n                test(123, 123);\\n            }\\n\\n            void test(int value1 = 123, int value2...\n  kwargs = {}\n  callable_obj = <bound method CompilerTestBase.compile of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_default_before_required>>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3223, in test_prototype_default_before_required\n    self.assertRaises(CompileError, self.compile, source)\n    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 795, in assertRaises\n    return context.handle(\'assertRaises\', args, kwargs)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 238, in handle\n    callable_obj(*args, **kwargs)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_default_before_required
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3021, in test_prototype_no_args\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 742, in compile\n    self._compile_function(root, name, ncs)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 784, in _compile_function\n    self.block.compile(temp, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_no_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  result = <TestCaseFunction test_prototype_no_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82855.2979355\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  method = <bound method TestNCSCompiler.test_prototype_no_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>>\n\nFunction \'test_prototype_no_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3021:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_no_args>\n  script = \'\\n            void test();\\n\\n            void main()\\n            {\\n                test();\\n            }\\n\\n            void test()\\n            {\\n                PrintInteger(56);\\n            ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920F012B0...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:742:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  previous_is_default = False\n\nFunction \'_compile_function\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:784:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'test\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n        _break_scope=Fa...,\n    line_num=9\n)\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'test\'\n  ncs = NCS(#0: NOP; #1: NOP; #2: JSR->#0; ... (3 more))\n  temp = NCS(#0: CONSTI(56); #1: ACTION(4, 1); #2: MOVSP(0); ... (1 more))\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40710>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: CONSTI(56); #1: ACTION(4, 1); #2: MOVSP(0); ... (1 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x0000019920CEF950>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3021, in test_prototype_no_args\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 742, in compile\n    self._compile_function(root, name, ncs)\n    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 784, in _compile_function\n    self.block.compile(temp, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_no_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3045, in test_prototype_with_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  result = <TestCaseFunction test_prototype_with_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82855.8093785\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  method = <bound method TestNCSCompiler.test_prototype_with_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>>\n\nFunction \'test_prototype_with_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3045:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_arg>\n  script = \'\\n            void test(int value);\\n\\n            void main()\\n            {\\n                test(57);\\n            }\\n\\n            void test(int value)\\n            {\\n                PrintIntege...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A2A50...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920C26BD0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B9130>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IntExpression(value=57)]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3045, in test_prototype_with_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_arg
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3125, in test_prototype_with_default_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_default_arg>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  result = <TestCaseFunction test_prototype_with_default_arg>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_default_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82856.30266\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  method = <bound method TestNCSCompiler.test_prototype_with_default_arg of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>>\n\nFunction \'test_prototype_with_default_arg\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3125:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_default_arg>\n  script = \'\\n            void test(int value = 57);\\n\\n            void main()\\n            {\\n                test();\\n            }\\n\\n            void test(int value = 57)\\n            {\\n                Pri...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920F03A10...\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n        _break_scope=Fa...,\n    line_num=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019920F40050>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: NOP; #2: CONSTI(57); ... (3 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x000001991F9B8320>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionForwardDeclaration object at 0x00000...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[]\n    )\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3125, in test_prototype_with_default_arg\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_default_arg
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3095, in test_prototype_with_many_args\n    ncs = self.compile(\n        """\n    ...<15 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_many_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  result = <TestCaseFunction test_prototype_with_many_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_many_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82858.1589674\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  method = <bound method TestNCSCompiler.test_prototype_with_many_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>>\n\nFunction \'test_prototype_with_many_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3095:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_many_args>\n  script = \'\\n            void test(int a, effect z, int b, int c, int d = 4)\\n            {\\n                PrintInteger(a);\\n                PrintInteger(b);\\n                PrintInteger(c);\\n               ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=10\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=10\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FE090>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F2FD7F0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991F9A1E80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CPTOPSP(-20, 4); #2: ACTION(4, 1); ... (34 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1940>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1780...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={\'test\': FunctionReference(instruction=NCSInstruction(type=NOP, args=[], jump=None), definition=<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991F9A1...,\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=FunctionCallExpression(\n        _function=Identifier(\n            label=\'test\'\n        ),\n        _args=[IdentifierExpression(identifier=a), IdentifierExpression(identifier=z), IdentifierEx...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3095, in test_prototype_with_many_args\n    ncs = self.compile(\n        """\n    ...<15 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_many_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3087, in test_prototype_with_three_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_prototype_with_three_args>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  result = <TestCaseFunction test_prototype_with_three_args>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_prototype_with_three_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82859.2152016\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  method = <bound method TestNCSCompiler.test_prototype_with_three_args of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>>\n\nFunction \'test_prototype_with_three_args\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3087:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_prototype_with_three_args>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (31 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757169983216: 0, 1757169989600: 1, 1757191098720: 2, 1757134288864: 3, 1757134289536: 4, 1757134287072: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 17\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3087, in test_prototype_with_three_args\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_prototype_with_three_args
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3463, in test_return\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  result = <TestCaseFunction test_return>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82861.5908215\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  method = <bound method TestNCSCompiler.test_return of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>>\n\nFunction \'test_return\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3463:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757171818560: 0, 1757171813632: 1, 1757170476752: 2, 1757170478880: 3, 1757170477760: 4, 1757170478544: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3463, in test_return\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3486, in test_return_parenthesis\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return_parenthesis>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  result = <TestCaseFunction test_return_parenthesis>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return_parenthesis of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82862.642377\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  method = <bound method TestNCSCompiler.test_return_parenthesis of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>>\n\nFunction \'test_return_parenthesis\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3486:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757134286400: 0, 1757194239152: 1, 1757134505584: 2, 1757171814080: 3, 1757171818448: 4, 1757171813968: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=321],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=321],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3486, in test_return_parenthesis\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return_parenthesis
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3508, in test_return_parenthesis_constant\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_return_parenthesis_constant>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  result = <TestCaseFunction test_return_parenthesis_constant>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_return_parenthesis_constant of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82863.9208817\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  method = <bound method TestNCSCompiler.test_return_parenthesis_constant of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>>\n\nFunction \'test_return_parenthesis_constant\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3508:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_return_parenthesis_constant>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757193088128: 0, 1757193083760: 1, 1757165736736: 2, 1757165732368: 3, 1757165743792: 4, 1757165745136: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3508, in test_return_parenthesis_constant\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_return_parenthesis_constant
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2337, in test_scope\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  result = <TestCaseFunction test_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82867.3832714\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  method = <bound method TestNCSCompiler.test_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>>\n\nFunction \'test_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2337:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scope>\n  script = \'\\n            void main()\\n            {\\n                int value = 1;\\n\\n                if (value == 1)\\n                {\\n                    value = 2;\\n                }\\n            }\\n     ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FBD70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019920DEA040>, <pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F19...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(1); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DEB230>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920E2ACD0>],\n    else_block=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2337, in test_scope\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_scope
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2372, in test_scoped_block\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_scoped_block>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  result = <TestCaseFunction test_scoped_block>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_scoped_block of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82869.5542921\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  method = <bound method TestNCSCompiler.test_scoped_block of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>>\n\nFunction \'test_scoped_block\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2372:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_scoped_block>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197909504: 0, 1757197909392: 1, 1757197902000: 2, 1757197902336: 3, 1757197902672: 4, 1757197902448: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2372, in test_scoped_block\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_scoped_block
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1817, in test_single_statement_else_if_else\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_single_statement_else_if_else>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  result = <TestCaseFunction test_single_statement_else_if_else>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_single_statement_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82870.5834716\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  method = <bound method TestNCSCompiler.test_single_statement_else_if_else of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>>\n\nFunction \'test_single_statement_else_if_else\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1817:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_else_if_else>\n  script = \'\\n            void main()\\n            {\\n                if (0) PrintInteger(11);\\n                else if (0) PrintInteger(22);\\n                else PrintInteger(33);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F3DAED0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F3DA450>],\n        _break_scope=...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x000001991F3DAED0>],\n    else_block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x000001991F3DA450>],\n        _break_scope=...\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=0),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921267EF0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(0); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE8D70>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920DE8750>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1817, in test_single_statement_else_if_else\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_single_statement_else_if_else
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1801, in test_single_statement_if\n    ncs = self.compile(\n        """\n    ...<4 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_single_statement_if>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  result = <TestCaseFunction test_single_statement_if>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_single_statement_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82871.8210128\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  method = <bound method TestNCSCompiler.test_single_statement_if of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>>\n\nFunction \'test_single_statement_if\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1801:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_single_statement_if>\n  script = \'\\n            void main()\\n            {\\n                if (1) PrintInteger(222);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=False...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=False...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920DE9550>],\n    else_block=None\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2411:\n  self = ConditionalBlock(\n    line_num=None,\n    if_blocks=[<pykotor.resource.formats.ncs.compiler.classes.ConditionAndBlock object at 0x0000019920DE9550>],\n    else_block=None\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  jump_count = 2\n  jump_tos = [NCSInstruction(type=NOP, args=[], jump=None), NCSInstruction(type=NOP, args=[], jump=None)]\n  i = 0\n  else_if = ConditionAndBlock(\n    condition=IntExpression(value=1),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[],\n            _parent=None,\n            _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock o...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n        _break_scope=Fal...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991F2FD2B0>],\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: CONSTI(1); #2: JZ->#0; ... (4 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019920DE95C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ConditionalBlock object at 0x0000019920C06820>],\n    _break_scope=False,\n    temp_stack=4\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1801, in test_single_statement_if\n    ncs = self.compile(\n        """\n    ...<4 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2411, in compile\n    else_if.block.compile(\n    ~~~~~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_single_statement_if
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2765, in test_struct_get_members\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_struct_get_members>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  result = <TestCaseFunction test_struct_get_members>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_struct_get_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82874.1765488\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  method = <bound method TestNCSCompiler.test_struct_get_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>>\n\nFunction \'test_struct_get_members\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2765:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_get_members>\n  script = \'\\n            struct ABC\\n            {\\n                int value1;\\n                string value2;\\n                float value3;\\n            };\\n\\n            void main()\\n            {\\n        ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=9\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>]\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>]\n  global_def = StructDefinition(\n    identifier=Identifier(\n        label=\'ABC\'\n    ),\n    members=[<pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x0000019920DEE470>, <pykotor.resource.formats.ncs.compiler.classes.StructMember object at 0x0000019920DEE360>, <pykotor....\n)\n  entry_index = 1\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=9\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991FAFED50>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991FB79FD0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: SAVEBP; #1: NOP; #2: RSADDI; ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.StructDefinition object at 0x000001991FAF76F0>, <pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7AC80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={\'ABC\': <pykotor.resource.formats.ncs.compiler.classes.Struct object at 0x000001991FAF7A80>}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2765, in test_struct_get_members\n    ncs = self.compile(\n        """\n    ...<14 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_struct_get_members
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2835, in test_struct_set_members\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1105, in copy_to_top\n    raise ValueError(msg)\nValueError: Offset must be a non-zero multiple of 4, got 0\n\nValueError: Offset must be a non-zero multiple of 4, got 0\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_struct_set_members>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  result = <TestCaseFunction test_struct_set_members>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_struct_set_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82877.1136613\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  method = <bound method TestNCSCompiler.test_struct_set_members of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>>\n\nFunction \'test_struct_set_members\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2835:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_struct_set_members>\n  ncs = NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:134:\n  self = Interpreter(\n    _ncs=NCS(#0: SAVEBP; #1: JSR->#3; #2: RETN; ... (29 more)),\n    _cursor=NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None),\n    _cursor_index=22,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170468128: 0, 1757169991168: 1, 1757169980752: 2, 1757170477200: 3, 1757170468576: 4, 1757170483024: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPTOPSP, args=[0, 4], jump=None)\n  index = 22\n  jump_value = None\n\nFunction \'copy_to_top\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1105:\n  self = Stack(\n    _stack=[INT=123],\n    _bp=0,\n    _bp_buffer=[0],\n    _global_bp=0\n)\n  offset = 0\n  size = 4\n  msg = \'Offset must be a non-zero multiple of 4, got 0\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2835, in test_struct_set_members\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 134, in step_execute\n    self._stack.copy_to_top(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1105, in copy_to_top\n    raise ValueError(msg)\nValueError: Offset must be a non-zero multiple of 4, got 0\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_struct_set_members
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 341, in test_subop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n\nValueError: Stack offset -16 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subop_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  result = <TestCaseFunction test_subop_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82884.4076568\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  method = <bound method TestNCSCompiler.test_subop_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>>\n\nFunction \'test_subop_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:341:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subop_int_int>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (8 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None),\n    _cursor_index=7,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757173759040: 0, 1757197899760: 1, 1757197896176: 2, 1757197900320: 3, 1757197899312: 4, 1757197899648: 5, 175719...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-16, 4], jump=None)\n  index = 7\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -16\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -16\n  msg = \'Stack offset -16 is out of range\'\n  remaining = 8\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 341, in test_subop_int_int\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -16 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subop_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1035, in test_subtraction_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_float_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  result = <TestCaseFunction test_subtraction_assignment_float_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82886.4058885\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_float_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>>\n\nFunction \'test_subtraction_assignment_float_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1035:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_float>\n  script = \'\\n            void main()\\n            {\\n                float value = 10.0;\\n                value -= 2.0;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117F890>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199211F1D30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F15C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1035, in test_subtraction_assignment_float_float\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_float_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1056, in test_subtraction_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_float_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  result = <TestCaseFunction test_subtraction_assignment_float_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82887.4402891\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_float_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>>\n\nFunction \'test_subtraction_assignment_float_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1056:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_float_int>\n  script = \'\\n            void main()\\n            {\\n                float value = 10.0;\\n                value -= 2;\\n\\n                PrintFloat(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920DAA750>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199211F3E00>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTF(10.0); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199211F0AD0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1056, in test_subtraction_assignment_float_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_float_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1027, in test_subtraction_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_int_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  result = <TestCaseFunction test_subtraction_assignment_int_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82888.2779762\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_int_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>>\n\nFunction \'test_subtraction_assignment_int_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1027:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_float>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (14 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757192108000: 0, 1757192107664: 1, 1757192104304: 2, 1757192102736: 3, 1757192105200: 4, 1757192105760: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1027, in test_subtraction_assignment_int_float\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_int_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 993, in test_subtraction_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_subtraction_assignment_int_int>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  result = <TestCaseFunction test_subtraction_assignment_int_int>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_subtraction_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82889.7224102\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  method = <bound method TestNCSCompiler.test_subtraction_assignment_int_int of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>>\n\nFunction \'test_subtraction_assignment_int_int\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:993:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_subtraction_assignment_int_int>\n  script = \'\\n            void main()\\n            {\\n                int value = 10;\\n                value -= 2 * 2;\\n\\n                PrintInteger(value);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117CB90>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921282DD0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(10); ... (13 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199212824A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 993, in test_subtraction_assignment_int_int\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_subtraction_assignment_int_int
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2276, in test_switch_scope_a\n    ncs = self.compile(\n        """\n    ...<27 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scope_a>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  result = <TestCaseFunction test_switch_scope_a>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scope_a of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82892.8371132\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  method = <bound method TestNCSCompiler.test_switch_scope_a of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>>\n\nFunction \'test_switch_scope_a\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2276:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_a>\n  script = \'\\n            int shape;\\n            int harmful;\\n\\n            void main()\\n            {\\n                object oTarget = OBJECT_SELF;\\n                effect e1, e2;\\n                effect e3;...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  script_globals = [<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x0000019921...\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921522820>]\n  global_def = GlobalVariableDeclaration(\n    identifier=Identifier(\n        label=\'harmful\'\n    ),\n    data_type=DynamicDataType(builtin=DataType.INT(int), struct=None),\n    is_const=False\n)\n  entry_index = 3\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=5\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB4D0>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921522C80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=True,\n    temp_stack=-4\n)\n  ncs = NCS(#0: RSADDI; #1: RSADDI; #2: SAVEBP; ... (58 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x000001992164FE90>, <pykotor.resource.formats.ncs.compiler.classes.GlobalVariableDeclaration object at 0x00...,\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992117E870>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921265D90>],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = SwitchStatement(\n    line_num=None,\n    expression=IntExpression(value=1),\n    blocks=[<pykotor.resource.formats.ncs.compiler.classes.SwitchBlock object at 0x0000019921635370>],\n    real_block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920EEB470>, <pykotor.resource.format...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: -4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2276, in test_switch_scope_a\n    ncs = self.compile(\n        """\n    ...<27 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: -4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scope_a
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2330, in test_switch_scope_b\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scope_b>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  result = <TestCaseFunction test_switch_scope_b>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scope_b of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82894.0593555\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  method = <bound method TestNCSCompiler.test_switch_scope_b of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>>\n\nFunction \'test_switch_scope_b\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2330:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scope_b>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=12,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197304896: 0, 1757134508048: 1, 1757197561296: 2, 1757197560960: 3, 1757197560624: 4, 1757197560736: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 12\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2500],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2500],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2330, in test_switch_scope_b\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scope_b
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2272, in test_switch_scoped_blocks\n    assert interpreter.action_snapshots[-1].arg_values[0] == 20\nAssertionError: assert INT=0 == 20\n\nAssertionError: assert INT=0 == 20\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_switch_scoped_blocks>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  result = <TestCaseFunction test_switch_scoped_blocks>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_switch_scoped_blocks of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82895.3244929\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  method = <bound method TestNCSCompiler.test_switch_scoped_blocks of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>>\n\nFunction \'test_switch_scoped_blocks\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2272:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_switch_scoped_blocks>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=None,\n    _cursor_index=-1,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196496896: 0, 1757196500704: 1, 1757200653168: 2, 1757200652832: 3, 1757196496224: 4, 1757196498688: 5, 1757196498800: 6, 1757196487712: 7, 1757196497456: 8, 1...<truncated>\n  @py_assert2 = False\n  @py_assert4 = None\n  @py_assert7 = None\n  @py_assert6 = None\n  @py_assert0 = INT=0\n  @py_assert3 = 20\n  @py_format5 = \'INT=0 == 20\'\n  @py_format7 = \'assert INT=0 == 20\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2272, in test_switch_scoped_blocks\n    assert interpreter.action_snapshots[-1].arg_values[0] == 20\nAssertionError: assert INT=0 == 20\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_switch_scoped_blocks
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1647, in test_ternary_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_assignment>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  result = <TestCaseFunction test_ternary_assignment>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82897.8256288\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  method = <bound method TestNCSCompiler.test_ternary_assignment of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>>\n\nFunction \'test_ternary_assignment\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1647:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_assignment>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (25 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197879792: 0, 1757197884384: 1, 1757201593664: 2, 1757201582576: 3, 1757201583360: 4, 1757201582240: 5, 17572...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1647, in test_ternary_assignment\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_assignment
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1489, in test_ternary_basic\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_basic>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  result = <TestCaseFunction test_ternary_basic>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_basic of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82898.5858469\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  method = <bound method TestNCSCompiler.test_ternary_basic of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>>\n\nFunction \'test_ternary_basic\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1489:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_basic>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757170477312: 0, 1757170468464: 1, 1757170470032: 2, 1757170479664: 3, 1757170475072: 4, 1757170467120: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=100],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=100],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1489, in test_ternary_basic\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_basic
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1506, in test_ternary_false_branch\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_false_branch>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  result = <TestCaseFunction test_ternary_false_branch>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_false_branch of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82899.5658417\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  method = <bound method TestNCSCompiler.test_ternary_false_branch of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>>\n\nFunction \'test_ternary_false_branch\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1506:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_false_branch>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (17 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=13,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196495552: 0, 1757196500144: 1, 1757201587280: 2, 1757201588400: 3, 1757201588176: 4, 1757201587952: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 13\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=200],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=200],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1506, in test_ternary_false_branch\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_false_branch
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1578, in test_ternary_float_branches\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_float_branches>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  result = <TestCaseFunction test_ternary_float_branches>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_float_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82900.3621051\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  method = <bound method TestNCSCompiler.test_ternary_float_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>>\n\nFunction \'test_ternary_float_branches\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1578:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_float_branches>\n  script = \'\\n            void main()\\n            {\\n                float result = 1 ? 3.14f : 2.71f;\\n                PrintFloat(result);\\n            }\\n        \'\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992164ECF0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991FB7AB30>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: CONSTI(1); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991FB7A190>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1578, in test_ternary_float_branches\n    ncs = self.compile(\n        """\n    ...<5 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_float_branches
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1561, in test_ternary_in_expression\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_in_expression>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  result = <TestCaseFunction test_ternary_in_expression>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_in_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82900.8746677\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  method = <bound method TestNCSCompiler.test_ternary_in_expression of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>>\n\nFunction \'test_ternary_in_expression\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1561:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_in_expression>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (23 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197892560: 0, 1757197886064: 1, 1757197562528: 2, 1757197562304: 3, 1757197564992: 4, 1757197562192: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1561, in test_ternary_in_expression\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_in_expression
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1543, in test_ternary_nested\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_nested>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  result = <TestCaseFunction test_ternary_nested>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_nested of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82901.5045743\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  method = <bound method TestNCSCompiler.test_ternary_nested of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>>\n\nFunction \'test_ternary_nested\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1543:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_nested>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (33 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201595568: 0, 1757201594224: 1, 1757192104864: 2, 1757192107440: 3, 1757192105424: 4, 1757192105984: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=1],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1543, in test_ternary_nested\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_nested
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1664, in test_ternary_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_precedence>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  result = <TestCaseFunction test_ternary_precedence>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82902.6899289\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  method = <bound method TestNCSCompiler.test_ternary_precedence of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>>\n\nFunction \'test_ternary_precedence\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1664:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_precedence>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=17,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197891552: 0, 1757201581904: 1, 1757201588624: 2, 1757201588512: 3, 1757201582800: 4, 1757201582128: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 17\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=2],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1664, in test_ternary_precedence\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_precedence
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1606, in test_ternary_string_branches\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_string_branches>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  result = <TestCaseFunction test_ternary_string_branches>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_string_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82903.5459976\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  method = <bound method TestNCSCompiler.test_ternary_string_branches of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>>\n\nFunction \'test_ternary_string_branches\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_string_branches>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (15 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=11,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757197887744: 0, 1757197880688: 1, 1757197890768: 2, 1757197891104: 3, 1757197881360: 4, 1757197891776: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 11\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[STRING=, STRING=yes],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[STRING=, STRING=yes],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = STRING=\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1606, in test_ternary_string_branches\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_string_branches
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1628, in test_ternary_with_function_calls\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_with_function_calls>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  result = <TestCaseFunction test_ternary_with_function_calls>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_with_function_calls of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82904.8601094\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  method = <bound method TestNCSCompiler.test_ternary_with_function_calls of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>>\n\nFunction \'test_ternary_with_function_calls\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1628:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_function_calls>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (28 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=24,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757201268560: 0, 1757201268112: 1, 1757202132992: 2, 1757202133552: 3, 1757202122576: 4, 1757201257248: 5, 1757...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 24\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=10],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1628, in test_ternary_with_function_calls\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_with_function_calls
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1524, in test_ternary_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_ternary_with_variables>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  result = <TestCaseFunction test_ternary_with_variables>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_ternary_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82905.8381057\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  method = <bound method TestNCSCompiler.test_ternary_with_variables of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>>\n\nFunction \'test_ternary_with_variables\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1524:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_ternary_with_variables>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (21 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757196486928: 0, 1757201254336: 1, 1757201267552: 2, 1757201266880: 3, 1757201267664: 4, 1757201254000: 5, 17572...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=5],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1524, in test_ternary_with_variables\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_ternary_with_variables
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2677, in test_vector\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  result = <TestCaseFunction test_vector>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82906.965672\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  method = <bound method TestNCSCompiler.test_vector of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>>\n\nFunction \'test_vector\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2677:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(2.0, 4.0, 4.0);\\n                float mag = VectorMagnitude(vec);\\n                PrintFloat(mag);\\n            }\\n    ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4650>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4CB0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921606C80>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (18 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199216070E0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2677, in test_vector\n    ncs = self.compile(\n        """\n    ...<6 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3732, in test_vector_addition\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_addition>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  result = <TestCaseFunction test_vector_addition>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82908.1480133\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  method = <bound method TestNCSCompiler.test_vector_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>>\n\nFunction \'test_vector_addition\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3732:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_addition>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(1.0, 2.0, 3.0);\\n                vector v2 = Vector(4.0, 5.0, 6.0);\\n                vector result = v1 + v2;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8050>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE8650>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199215219B0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992122C7C0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3732, in test_vector_addition\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_addition
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3826, in test_vector_compound_assignment_addition\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2270, in compile\n    expression_type = self.expression.compile(ncs, root, block)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1632, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\n\nCompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_addition>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  result = <TestCaseFunction test_vector_compound_assignment_addition>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82909.3206635\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_addition of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>>\n\nFunction \'test_vector_compound_assignment_addition\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3826:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_addition>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(1.0, 2.0, 3.0);\\n                v += Vector(0.5, 0.5, 0.5);\\n                PrintFloat(v.x);\\n                PrintFloat(...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n        ),\n        ex...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2270:\n  self = ExpressionStatement(\n    line_num=None,\n    expression=AdditionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n        ),\n        ex...\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:1632:\n  self = AdditionAssignment(\n    field_access=FieldAccess(\n        identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991F815860>]\n    ),\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VECTOR: \'vector\'>, \'Vector\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'x\', \'0.0\'), ScriptParam(<DataType.FLOAT: \'float\'>, \'y\'...\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (12 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921688DE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920E2F950>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688EC0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  is_global = False\n  variable_type = DynamicDataType(builtin=DataType.VECTOR(vector), struct=None)\n  stack_index = -12\n  is_const = False\n  var_name = \'v\'\n  msg = "Type mismatch in += operation on \'v\'\\n  Variable type: VECTOR\\n  Expression type: VECTOR\\n  Supported: int+=int, float+=float/int, string+=string"\n  instruction_type = <NCSInstructionType.CPTOPSP: NCSInstructionTypeValue(byte_code=<NCSByteCode.CPTOPSP: 3>, qualifier=1)>\n  expresion_type = DynamicDataType(builtin=DataType.VECTOR(vector), struct=None)\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3826, in test_vector_compound_assignment_addition\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2270, in compile\n    expression_type = self.expression.compile(ncs, root, block)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 1632, in compile\n    raise CompileError(msg)\npykotor.resource.formats.ncs.compiler.classes.CompileError: Type mismatch in += operation on \'v\'\n  Variable type: VECTOR\n  Expression type: VECTOR\n  Supported: int+=int, float+=float/int, string+=string\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_addition
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3895, in test_vector_compound_assignment_division\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_division>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  result = <TestCaseFunction test_vector_compound_assignment_division>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_division of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82910.6527889\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_division of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>>\n\nFunction \'test_vector_compound_assignment_division\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3895:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_division>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(8.0, 6.0, 4.0);\\n                v /= 2.0;\\n                PrintFloat(v.x);\\n                PrintFloat(v.y);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199216097F0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992127F3F0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992127F930>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3895, in test_vector_compound_assignment_division\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_division
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3872, in test_vector_compound_assignment_multiplication\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_multiplication>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  result = <TestCaseFunction test_vector_compound_assignment_multiplication>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_multiplication of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>...\n  expecting_failure = False\n  outcome = None\n  start_time = 82911.400698\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_multiplication of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>...\n\nFunction \'test_vector_compound_assignment_multiplication\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3872:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_multiplication>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(2.0, 3.0, 4.0);\\n                v *= 2.0;\\n                PrintFloat(v.x);\\n                PrintFloat(v.y);\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991F7FAE70>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921688E50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (28 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992168A890>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3872, in test_vector_compound_assignment_multiplication\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_multiplication
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3849, in test_vector_compound_assignment_subtraction\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_compound_assignment_subtraction>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  result = <TestCaseFunction test_vector_compound_assignment_subtraction>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_compound_assignment_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82912.6929848\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  method = <bound method TestNCSCompiler.test_vector_compound_assignment_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>>\n\nFunction \'test_vector_compound_assignment_subtraction\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3849:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_compound_assignment_subtraction>\n  script = \'\\n            void main()\\n            {\\n                vector v = Vector(5.0, 5.0, 5.0);\\n                v -= Vector(1.0, 2.0, 3.0);\\n                PrintFloat(v.x);\\n                PrintFloat(...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FE98B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992142C050>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992142CE50>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3849, in test_vector_compound_assignment_subtraction\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_compound_assignment_subtraction
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3803, in test_vector_division_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_division_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  result = <TestCaseFunction test_vector_division_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_division_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82913.4552877\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  method = <bound method TestNCSCompiler.test_vector_division_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>>\n\nFunction \'test_vector_division_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3803:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_division_float>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(8.0, 6.0, 4.0);\\n                vector result = v1 / 2.0;\\n                PrintFloat(result.x);\\n                PrintFl...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB4A70>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019920FB49B0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199215B7E00>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921400980>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3803, in test_vector_division_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_division_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2718, in test_vector_get_components\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_get_components>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  result = <TestCaseFunction test_vector_get_components>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_get_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82914.3540189\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  method = <bound method TestNCSCompiler.test_vector_get_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>>\n\nFunction \'test_vector_get_components\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2718:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_get_components>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(2.0, 4.0, 6.0);\\n                PrintFloat(vec.x);\\n                PrintFloat(vec.y);\\n                PrintFloat(vec.z...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907410>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992191DEF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (23 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001992191DBE0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2718, in test_vector_get_components\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_get_components
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3780, in test_vector_multiplication_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_multiplication_float>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  result = <TestCaseFunction test_vector_multiplication_float>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_multiplication_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82915.6854727\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  method = <bound method TestNCSCompiler.test_vector_multiplication_float of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>>\n\nFunction \'test_vector_multiplication_float\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3780:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_multiplication_float>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(2.0, 3.0, 4.0);\\n                vector result = v1 * 2.0;\\n                PrintFloat(result.x);\\n                PrintFl...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x00000199219073B0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921907350>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001992191FAF0>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (31 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219B88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3780, in test_vector_multiplication_float\n    ncs = self.compile(\n        """\n    ...<8 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_multiplication_float
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2697, in test_vector_notation\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_notation>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  result = <TestCaseFunction test_vector_notation>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_notation of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82916.5337143\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  method = <bound method TestNCSCompiler.test_vector_notation of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>>\n\nFunction \'test_vector_notation\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2697:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_notation>\n  script = \'\\n            void main()\\n            {\\n                vector vec = [1.0, 2.0, 3.0];\\n                PrintFloat(vec.x);\\n                PrintFloat(vec.y);\\n                PrintFloat(vec.z);\\n  ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001992183AB10>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991C295470>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001992...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (22 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x00000199219BBA80>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2697, in test_vector_notation\n    ncs = self.compile(\n        """\n    ...<7 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_notation
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2740, in test_vector_set_components\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_set_components>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  result = <TestCaseFunction test_vector_set_components>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_set_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82917.3250846\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  method = <bound method TestNCSCompiler.test_vector_set_components of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>>\n\nFunction \'test_vector_set_components\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:2740:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_set_components>\n  script = \'\\n            void main()\\n            {\\n                vector vec = Vector(0.0, 0.0, 0.0);\\n                vec.x = 2.0;\\n                vec.y = 4.0;\\n                vec.z = 6.0;\\n              ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB0D250>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991D6C8E50>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991...,\n    _break_scope=False,\n    temp_stack=12\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (35 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991D6C88A0>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 12\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 2740, in test_vector_set_components\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 12\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_set_components
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3756, in test_vector_subtraction\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_vector_subtraction>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  result = <TestCaseFunction test_vector_subtraction>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_vector_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82918.7740105\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  method = <bound method TestNCSCompiler.test_vector_subtraction of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>>\n\nFunction \'test_vector_subtraction\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:3756:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_vector_subtraction>\n  script = \'\\n            void main()\\n            {\\n                vector v1 = Vector(5.0, 7.0, 9.0);\\n                vector v2 = Vector(1.0, 2.0, 3.0);\\n                vector result = v1 - v2;\\n           ...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07EF0>, <pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DB07B90>, <pykotor.reso...,\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB01D30>, <pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x00000199...,\n    _break_scope=False,\n    temp_stack=24\n)\n  ncs = NCS(#0: NOP; #1: RSADDF; #2: RSADDF; ... (40 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921A4C050>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintFloat\', [ScriptParam(<DataType.FLOAT: \'float\'>, \'fFloat\', None), ScriptParam(<DataType.INT: \'int\'>, \'nW...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 24\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 3756, in test_vector_subtraction\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 24\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_vector_subtraction
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1835, in test_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  result = <TestCaseFunction test_while_loop>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82919.9173364\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  method = <bound method TestNCSCompiler.test_while_loop of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>>\n\nFunction \'test_while_loop\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1835:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921AAFD10>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (14 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DB85E10>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x0000019921AAFAD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DB85FD0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D5610...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=SubtractionAssignment(\n        field_access=FieldAccess(\n            identifiers=[<pykotor.resource.formats.ncs.compiler.classes.Identifier object at 0x000001991D700BE0>]\n        ),\n       ...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1835, in test_while_loop\n    ncs = self.compile(\n        """\n    ...<9 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1929, in test_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n\nValueError: Stack offset -12 is out of range\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_scope>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  result = <TestCaseFunction test_while_loop_scope>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82921.406582\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  method = <bound method TestNCSCompiler.test_while_loop_scope of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>>\n\nFunction \'test_while_loop_scope\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1929:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_scope>\n  ncs = NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more))\n  interpreter = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n\nFunction \'run\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:387:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n\nFunction \'step_execute\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:137:\n  self = Interpreter(\n    _ncs=NCS(#0: JSR->#2; #1: RETN; #2: NOP; ... (36 more)),\n    _cursor=NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None),\n    _cursor_index=5,\n    _functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0...,\n    _instruction_indices={1757140495600: 0, 1757140493584: 1, 1757140253200: 2, 1757140253312: 3, 1757140253760: 4, 1757139436160: 5, 17571...<truncated>\n  cursor = NCSInstruction(type=CPDOWNSP, args=[-12, 4], jump=None)\n  index = 5\n  jump_value = None\n\nFunction \'copy_down\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1156:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  size = 4\n  num_elements = 1\n  target_indices = []\n  temp_offset = -12\n  _ = 0\n\nFunction \'_stack_index\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py:1044:\n  self = Stack(\n    _stack=[INT=0, INT=11],\n    _bp=0,\n    _bp_buffer=[],\n    _global_bp=0\n)\n  offset = -12\n  msg = \'Stack offset -12 is out of range\'\n  remaining = 4\n  index = -3\n  element = INT=0\n  element_size = 4\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1929, in test_while_loop_scope\n    interpreter.run()\n    ~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 387, in run\n    if not self.step_execute():\n           ~~~~~~~~~~~~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 137, in step_execute\n    self._stack.copy_down(cursor.args[0], cursor.args[1])\n    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1156, in copy_down\n    target_index = self._stack_index(temp_offset)\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\interpreter.py", line 1044, in _stack_index\n    raise ValueError(msg)\nValueError: Stack offset -12 is out of range\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_scope
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1859, in test_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_with_break>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  result = <TestCaseFunction test_while_loop_with_break>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82922.7259452\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  method = <bound method TestNCSCompiler.test_while_loop_with_break of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>>\n\nFunction \'test_while_loop_with_break\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1859:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_break>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991DBB9670>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D...,\n    _break_scope=False,\n    temp_stack=4\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (16 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x000001991DBC1010>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB90D0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x000001991DBC16A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x00000199215F42...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = BreakStatement(\n    line_num=None\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 4\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1859, in test_while_loop_with_break\n    ncs = self.compile(\n        """\n    ...<10 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 4\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_with_break
FAILED: 'Traceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1882, in test_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\nStack Trace Variables:\n\nFunction \'testPartExecutor\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:58:\n  self = _Outcome(\n    expecting_failure=False,\n    result=<TestCaseFunction test_while_loop_with_continue>,\n    result_supports_subtests=True,\n    success=False,\n    expectedFailure=None\n)\n  test_case = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  subTest = False\n  old_success = True\n  exc_info = None\n\nFunction \'run\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:651:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  result = <TestCaseFunction test_while_loop_with_continue>\n  stopTestRun = None\n  testMethod = <bound method TestNCSCompiler.test_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>>\n  expecting_failure = False\n  outcome = None\n  start_time = 82924.0056454\n\nFunction \'_callTestMethod\' at C:\\Program Files\\Python313\\Lib\\unittest\\case.py:606:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  method = <bound method TestNCSCompiler.test_while_loop_with_continue of <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>>\n\nFunction \'test_while_loop_with_continue\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:1882:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py:105:\n  self = <tests.test_pykotor.resource.formats.test_ncs.TestNCSCompiler testMethod=test_while_loop_with_continue>\n  script = \'\\n            void main()\\n            {\\n                int value = 3;\\n                while (value)\\n                {\\n                    PrintInteger(value);\\n                    value -= 1;\\n...\n  library = {}\n  library_lookup = None\n  normalized_lookup = None\n  nssLexer = NssLexer(\n    lexer=Lexer(\n        lexre=[(re.compile(\'(?P<t_NEWLINE>\\\\n+)|(?P<t_NOP>nop)|(?P<t_COMMENT>//[^\\\\n]*\\\\n)|(?P<t_MULTILINE_COMMENT>\\\\/\\\\*(\\\\*(?!\\\\/)|[^*])*\\\\*\\\\/)|(?P<t_INCLUDE>\\\\#include)|(?P<t_OBJECTSE...\n)\n  nssParser = NssParser(\n    parser=LRParser(\n        productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_defini...,\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library={},\n    library_lookup=[]\n)\n  parser = LRParser(\n    productions=[Production(S\' -> code_root), Production(code_root -> code_root code_root_object), Production(code_root -> <empty>), Production(code_root_object -> function_definition), Production(code_ro...,\n    action={0: {\'INCLUDE\': -2, \'CONST\': -2, \'STRUCT\': -2, \'INT_TYPE\': -2, \'FLOAT_TYPE\': -2, \'OBJECT_TYPE\': -2, \'VOID_TYPE\': -2, \'EVENT_TYPE\': -2, \'EFFECT_TYPE\': -2, \'ITEMPROPERTY_TYPE\': -2, \'LOCATION_TYPE...,\n    goto={0: {\'code_root\': 1}, 1: {\'code_root_object\': 2, \'function_definition\': 3, \'include_script\': 4, \'function_forward_declaration\': 5, \'global_variable_declaration\': 6, \'global_variable_initializatio...,\n    defaulted_states={10: -132, 14: -119, 15: -120, 16: -121, 17: -122, 18: -123, 19: -124, 20: -125, 21: -126, 22: -127, 23: -128, 24: -129, 25: -130, 35: -131},\n    errorok=True,\n    statestack=[0, 1],\n    symstack=[$end, code_root],\n    state=2\n)\n  t = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:399:\n  self = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  included = []\n  obj = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  script_globals = []\n  others = [<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>]\n  entry_index = 0\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:747:\n  self = FunctionDefinition(\n    return_type=DynamicDataType(builtin=DataType.VOID(void), struct=None),\n    identifier=Identifier(\n        label=\'main\'\n    ),\n    parameters=[],\n    block=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.comp...,\n    line_num=2\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  name = \'main\'\n  previous_is_default = False\n  retn = NCSInstruction(type=RETN, args=[], jump=None)\n  function_start = NCSInstruction(type=NOP, args=[], jump=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:572:\n  self = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = None\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  statement = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n            _parent=None,\n  ...\n)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:2491:\n  self = WhileLoopBlock(\n    line_num=None,\n    condition=IdentifierExpression(identifier=value),\n    block=CodeBlock(\n        scope=[],\n        _parent=CodeBlock(\n            scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n            _parent=None,\n  ...\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = None\n  continue_instruction = None\n  loopstart = NCSInstruction(type=NOP, args=[], jump=None)\n  loopend = NCSInstruction(type=NOP, args=[], jump=None)\n  condition_type = DynamicDataType(builtin=DataType.INT(int), struct=None)\n\nFunction \'compile\' at G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py:613:\n  self = CodeBlock(\n    scope=[],\n    _parent=CodeBlock(\n        scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n        _parent=None,\n        _statements=[<pykotor.resource.formats.ncs.co...,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x000001991D580EF0>, <pykotor.resource.formats.ncs.compiler.classes.ExpressionStatement object at 0x0000019921...,\n    _break_scope=False,\n    temp_stack=8\n)\n  ncs = NCS(#0: NOP; #1: RSADDI; #2: CONSTI(3); ... (19 more))\n  root = CodeRoot(\n    objects=[<pykotor.resource.formats.ncs.compiler.classes.FunctionDefinition object at 0x0000019921C24600>],\n    library={},\n    functions=[ScriptFunction(<DataType.INT: \'int\'>, \'Random\', [ScriptParam(<DataType.INT: \'int\'>, \'nMaxInteger\', None)], \'// 0: Get an integer between 0 and nMaxInteger-1.\\r\\n// Return value on error: 0\\...,\n    constants=[ScriptConstant("DataType.INT", "NUM_INVENTORY_SLOTS", "18"), ScriptConstant("DataType.INT", "TRUE", "1"), ScriptConstant("DataType.INT", "FALSE", "0"), ScriptConstant("DataType.FLOAT", "DIR...,\n    library_lookup=[],\n    function_map={},\n    _global_scope=[],\n    struct_map={}\n)\n  block = CodeBlock(\n    scope=[<pykotor.resource.formats.ncs.compiler.classes.ScopedValue object at 0x000001991DBB8DD0>],\n    _parent=None,\n    _statements=[<pykotor.resource.formats.ncs.compiler.classes.DeclarationStatement object at 0x0000019921C248A0>, <pykotor.resource.formats.ncs.compiler.classes.WhileLoopBlock object at 0x000001991D6D66...,\n    _break_scope=True,\n    temp_stack=0\n)\n  return_instruction = NCSInstruction(type=RETN, args=[], jump=None)\n  break_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  continue_instruction = NCSInstruction(type=NOP, args=[], jump=None)\n  statement = ExpressionStatement(\n    line_num=None,\n    expression=EngineCallExpression(\n        _function=ScriptFunction(<DataType.VOID: \'void\'>, \'PrintInteger\', [ScriptParam(<DataType.INT: \'int\'>, \'nInteger\', None)], \'// 4: Output nInteger to the log fil...\n)\n  msg = \'Internal compiler error: Temporary stack not cleared after block compilation\\n  Temp stack size: 8\\n  This indicates a bug in one of the expression/statement compile methods\'\nTraceback (most recent call last):\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 58, in testPartExecutor\n    yield\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 651, in run\n    self._callTestMethod(testMethod)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\n  File "C:\\Program Files\\Python313\\Lib\\unittest\\case.py", line 606, in _callTestMethod\n    if method() is not None:\n       ~~~~~~^^\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 1882, in test_while_loop_with_continue\n    ncs = self.compile(\n        """\n    ...<11 lines>...\n    """\n    )\n  File "G:\\GitHub\\PyKotor\\tests\\test_pykotor\\resource\\formats\\test_ncs.py", line 105, in compile\n    t.compile(ncs)\n    ~~~~~~~~~^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 399, in compile\n    obj.compile(ncs, self)\n    ~~~~~~~~~~~^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 747, in compile\n    self.block.compile(ncs, root, None, retn, None, None)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 572, in compile\n    statement.compile(\n    ~~~~~~~~~~~~~~~~~^\n        ncs,\n        ^^^^\n    ...<4 lines>...\n        continue_instruction,\n        ^^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 2491, in compile\n    self.block.compile(ncs, root, block, return_instruction, loopend, loopstart)\n    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "G:\\GitHub\\PyKotor\\Libraries\\PyKotor\\src\\pykotor\\resource\\formats\\ncs\\compiler\\classes.py", line 613, in compile\n    raise ValueError(msg)\nValueError: Internal compiler error: Temporary stack not cleared after block compilation\n  Temp stack size: 8\n  This indicates a bug in one of the expression/statement compile methods\n' tests/test_pykotor/resource/formats/test_ncs.py::TestNCSCompiler::test_while_loop_with_continue
============ 137 failed, 48 passed, 1 warning in 197.07s (0:03:17) ============
