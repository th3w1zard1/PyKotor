[tox]
envlist = py38,py39,py310,py311,py312,py313
isolated_build = true
minversion = 4.0

[testenv]
description = Test compile_tool.py across Python versions
deps =
    pytest>=7.0.0,<8.0.0
    pytest-mock>=3.0.0
    pytest-cov>=4.0.0
commands =
    pytest tests/test_compile_tool.py -v --tb=short {posargs}

[testenv:py38]
basepython = python3.8

[testenv:py39]
basepython = python3.9

[testenv:py310]
basepython = python3.10

[testenv:py311]
basepython = python3.11

[testenv:py312]
basepython = python3.12

[testenv:py313]
basepython = python3.13

[testenv:lint]
description = Run linting checks
deps =
    ruff>=0.1.0,<0.4.0
commands =
    ruff check compile/compile_tool.py
    ruff format --check compile/compile_tool.py
